import{r as l,j as e,a as I,b as P,z as O,u as K}from"./index-Cv_EM5B3.js";import{X as H,C as L,D as Q,S as W}from"./DashboardLayout-Dgk-_yJ3.js";import{U as X}from"./user-AQ183lw-.js";import{S as Y}from"./save-BnGpkhwG.js";import{A as J}from"./alert-circle-DjD34Cbj.js";import{C as M}from"./clock-YOqg-tzx.js";import{X as B}from"./x-circle-QESXgDV1.js";import{C as $}from"./check-circle-C2ph5B4V.js";import{U as _}from"./video-D6oD5f21.js";import{I as Z}from"./info-BgLrENgl.js";import{B as ee}from"./bar-chart-3-DmiS9vDO.js";import{P as te}from"./plus-smBCJEhq.js";import{E as se}from"./eye-WupJDer2.js";import"./graduation-cap-DFyTfTku.js";import"./credit-card-DXrYcg-6.js";const V="http://localhost:5000/api/v1",ae=({isOpen:h,onClose:o,schedule:c,onSuccess:E})=>{var i,D;const[p,a]=l.useState(!1),[j,g]=l.useState(!1),[x,f]=l.useState([]),[u,r]=l.useState(new Map),[m,v]=l.useState({total:0,present:0,absent:0,late:0,excused:0,unmarked:0});l.useEffect(()=>{h&&c&&A()},[h,c]);const A=async()=>{try{g(!0);const s=localStorage.getItem("token"),b=(await(await fetch(`${V}/attendance/schedule/${c.id}`,{headers:{Authorization:`Bearer ${s}`}})).json()).data;f(b.students),v(b.stats);const y=new Map;b.students.forEach(w=>{w.attendance?y.set(w.student.id,{status:w.attendance.status,remarks:w.attendance.remarks||""}):y.set(w.student.id,{status:"PRESENT",remarks:""})}),r(y)}catch(s){console.error("Failed to fetch attendance:",s),alert("Failed to load attendance data")}finally{g(!1)}},N=(s,n)=>{const d=u.get(s)||{status:"PRESENT",remarks:""};r(new Map(u.set(s,{...d,status:n})))},S=(s,n)=>{const d=u.get(s)||{status:"PRESENT",remarks:""};r(new Map(u.set(s,{...d,remarks:n})))},C=s=>{const n=new Map(u);x.forEach(d=>{const b=n.get(d.student.id)||{status:"PRESENT",remarks:""};n.set(d.student.id,{...b,status:s})}),r(n)},R=async()=>{a(!0);try{const s=localStorage.getItem("token"),n={scheduleId:c.id,attendanceData:Array.from(u.entries()).map(([b,y])=>({studentId:b,status:y.status,remarks:y.remarks}))};if(!(await fetch(`${V}/attendance/mark`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(n)})).ok)throw new Error("Failed to mark attendance");alert("Attendance marked successfully"),E(),o()}catch(s){alert(s.message||"Failed to mark attendance")}finally{a(!1)}};if(!h)return null;const k=s=>{switch(s){case"PRESENT":return e.jsx($,{className:"w-5 h-5 text-green-600"});case"ABSENT":return e.jsx(B,{className:"w-5 h-5 text-red-600"});case"LATE":return e.jsx(M,{className:"w-5 h-5 text-orange-600"});case"EXCUSED":return e.jsx(J,{className:"w-5 h-5 text-blue-600"});default:return null}},U=s=>{switch(s){case"PRESENT":return"bg-green-100 text-green-800 border-green-300";case"ABSENT":return"bg-red-100 text-red-800 border-red-300";case"LATE":return"bg-orange-100 text-orange-800 border-orange-300";case"EXCUSED":return"bg-blue-100 text-blue-800 border-blue-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:o}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl sm:w-full",children:[e.jsxs("div",{className:"bg-primary-600 px-6 py-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Mark Attendance"}),e.jsxs("p",{className:"text-sm text-primary-100 mt-1",children:[(i=c==null?void 0:c.module)==null?void 0:i.moduleName," - ",(D=c==null?void 0:c.batch)==null?void 0:D.batchNumber]})]}),e.jsx("button",{onClick:o,className:"text-white hover:text-gray-200 transition",children:e.jsx(H,{className:"w-6 h-6"})})]}),!j&&e.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-6 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:m.total})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Present"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:m.present})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Absent"}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:m.absent})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Late"}),e.jsx("p",{className:"text-lg font-bold text-orange-600",children:m.late})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Excused"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:m.excused})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Unmarked"}),e.jsx("p",{className:"text-lg font-bold text-gray-600",children:m.unmarked})]})]})}),!j&&x.length>0&&e.jsx("div",{className:"bg-white px-6 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Mark all as:"}),e.jsx("button",{type:"button",onClick:()=>C("PRESENT"),className:"px-3 py-1 text-xs bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition",children:"Present"}),e.jsx("button",{type:"button",onClick:()=>C("ABSENT"),className:"px-3 py-1 text-xs bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition",children:"Absent"}),e.jsx("button",{type:"button",onClick:()=>C("LATE"),className:"px-3 py-1 text-xs bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition",children:"Late"})]})}),e.jsx("div",{className:"bg-white px-6 py-5 max-h-[calc(100vh-400px)] overflow-y-auto",children:j?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(I,{className:"w-8 h-8 animate-spin text-primary-600"})}):x.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(X,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No students enrolled in this batch"})]}):e.jsx("div",{className:"space-y-4",children:x.map(s=>{const n=u.get(s.student.id);return e.jsxs("div",{className:`border-2 rounded-lg p-4 ${U((n==null?void 0:n.status)||"PRESENT")}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-sm mr-3",children:e.jsx(X,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:[s.student.user.firstName," ",s.student.user.lastName]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.student.user.registrationNumber})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:["PRESENT","ABSENT","LATE","EXCUSED"].map(d=>e.jsx("button",{type:"button",onClick:()=>N(s.student.id,d),className:`p-2 rounded-lg border-2 transition ${(n==null?void 0:n.status)===d?"border-gray-900 bg-white shadow-md":"border-transparent bg-white/50 hover:bg-white"}`,title:d,children:k(d)},d))})]}),e.jsx("div",{className:"mt-3",children:e.jsx("input",{type:"text",placeholder:"Add remarks (optional)",value:(n==null?void 0:n.remarks)||"",onChange:d=>S(s.student.id,d.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-white"})})]},s.student.id)})})}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:o,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition",disabled:p,children:"Cancel"}),e.jsx("button",{type:"button",onClick:R,disabled:p||j||x.length===0,className:"flex items-center px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition disabled:opacity-50",children:p?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-5 h-5 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-5 h-5 mr-2"}),"Save Attendance"]})})]})]})]})})},re=({isOpen:h,onClose:o,scheduleId:c})=>{const[E,p]=l.useState(!1),[a,j]=l.useState(null);l.useEffect(()=>{h&&c&&g()},[h,c]);const g=async()=>{try{p(!0);const r=await P.get(`/attendance/schedule/${c}`);j(r.data.data)}catch{O.error("Failed to fetch attendance details"),o()}finally{p(!1)}},x=r=>new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),f=r=>r.substring(0,5),u=r=>{switch(r){case"PRESENT":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx($,{className:"w-3 h-3 mr-1"})," Present"]});case"ABSENT":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(B,{className:"w-3 h-3 mr-1"})," Absent"]});case"LATE":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(M,{className:"w-3 h-3 mr-1"})," Late"]});case"EXCUSED":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx(Z,{className:"w-3 h-3 mr-1"})," Excused"]});default:return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[e.jsx(J,{className:"w-3 h-3 mr-1"})," Unmarked"]})}};return h?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:o}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[e.jsxs("div",{className:"bg-primary-600 px-6 py-4 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Attendance Details"}),e.jsx("button",{onClick:o,className:"text-white hover:text-gray-200 transition",children:e.jsx(H,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"bg-white px-6 py-5 max-h-[calc(100vh-200px)] overflow-y-auto",children:E?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(I,{className:"w-12 h-12 text-primary-600 animate-spin"})}):a?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-6 pb-6 border-b",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-lg flex items-center justify-center text-primary-600",children:e.jsx(L,{className:"w-10 h-10"})}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a.schedule.module.moduleName}),e.jsxs("p",{className:"text-gray-500 font-medium",children:[a.schedule.module.moduleCode," â€¢ ",a.schedule.batch.batchNumber]}),e.jsxs("div",{className:"mt-2 flex flex-wrap justify-center md:justify-start gap-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(L,{className:"w-4 h-4 mr-1.5"}),x(a.schedule.date)]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(M,{className:"w-4 h-4 mr-1.5"}),f(a.schedule.startTime)," - ",f(a.schedule.endTime)]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:a.stats.total})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100",children:[e.jsx("p",{className:"text-xs text-green-600 font-medium uppercase tracking-wider",children:"Present"}),e.jsx("p",{className:"text-2xl font-bold text-green-900 mt-1",children:a.stats.present})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100",children:[e.jsx("p",{className:"text-xs text-red-600 font-medium uppercase tracking-wider",children:"Absent"}),e.jsx("p",{className:"text-2xl font-bold text-red-900 mt-1",children:a.stats.absent})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-100",children:[e.jsx("p",{className:"text-xs text-yellow-600 font-medium uppercase tracking-wider",children:"Late"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-900 mt-1",children:a.stats.late})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium uppercase tracking-wider",children:"Attendance Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-900 mt-1",children:[a.stats.total>0?(a.stats.present/a.stats.total*100).toFixed(1):0,"%"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider flex items-center",children:[e.jsx(_,{className:"w-4 h-4 mr-2"})," Student Attendance List"]}),e.jsx("div",{className:"overflow-x-auto border border-gray-200 rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID / Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remarks"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.students.map(r=>{var m,v;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[r.student.user.firstName," ",r.student.user.lastName]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500",children:r.student.studentCode})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u((m=r.attendance)==null?void 0:m.status)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-500 italic",children:((v=r.attendance)==null?void 0:v.remarks)||"-"})})]},r.student.id)})})]})})]})]}):e.jsx("div",{className:"text-center py-20",children:e.jsx("p",{className:"text-gray-500",children:"No attendance data found."})})}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end",children:e.jsx("button",{type:"button",onClick:o,className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition",children:"Close"})})]})]})}):null},ye=()=>{const{user:h}=K(),[o,c]=l.useState([]),[E,p]=l.useState(!0),[a,j]=l.useState(""),[g,x]=l.useState(1),[f,u]=l.useState(1),[r,m]=l.useState(!1),[v,A]=l.useState(!1),[N,S]=l.useState(null),[C,R]=l.useState([]),[k,U]=l.useState({totalRecords:0,presentCount:0,absentCount:0,attendanceRate:"0"}),[i,D]=l.useState({status:"",startDate:new Date().toISOString().split("T")[0],endDate:"",centerId:""});l.useEffect(()=>{n(),d()},[g,a,i]),l.useEffect(()=>{s()},[]);const s=async()=>{try{const t=await P.get("/centers");R(t.data.data.centers||[])}catch(t){console.error("Failed to fetch centers:",t)}},n=async()=>{try{p(!0);const t=new URLSearchParams({page:g.toString(),limit:"12",...a&&{search:a},...i.status&&{status:i.status},...i.startDate&&{startDate:i.startDate},...i.endDate&&{endDate:i.endDate},...i.centerId&&{centerId:i.centerId}}),T=await P.get(`/schedules?${t}`);c(T.data.data.schedules),u(T.data.data.pagination.pages)}catch(t){O.error("Failed to fetch schedules"),console.error(t)}finally{p(!1)}},d=async()=>{try{const t=await P.get("/attendance/stats");U(t.data.data)}catch(t){console.error("Failed to fetch stats:",t)}},b=t=>{S(t),m(!0)},y=t=>{S(t),A(!0)},w=t=>{j(t.target.value),x(1)},F=(t,T)=>{D({...i,[t]:T}),x(1)},q=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),z=t=>t.substring(0,5),G=t=>{switch(t){case"SCHEDULED":return"bg-blue-100 text-blue-800";case"COMPLETED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs(Q,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Attendance Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Mark and manage student attendance"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-5 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Records"}),e.jsx("p",{className:"text-2xl font-bold",children:k.totalRecords})]}),e.jsx(_,{className:"w-10 h-10 text-blue-500"})]})}),e.jsx("div",{className:"bg-white p-5 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Present"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:k.presentCount})]}),e.jsx($,{className:"w-10 h-10 text-green-500"})]})}),e.jsx("div",{className:"bg-white p-5 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Absent"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:k.absentCount})]}),e.jsx(B,{className:"w-10 h-10 text-red-500"})]})}),e.jsx("div",{className:"bg-white p-5 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Attendance Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[k.attendanceRate,"%"]})]}),e.jsx(ee,{className:"w-10 h-10 text-purple-500"})]})})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by module or batch...",value:a,onChange:w,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),(h==null?void 0:h.role)==="ADMIN"&&e.jsxs("select",{value:i.centerId,onChange:t=>F("centerId",t.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Centers"}),C.map(t=>e.jsx("option",{value:t.id,children:t.centerName},t.id))]}),e.jsx("input",{type:"date",value:i.startDate,onChange:t=>F("startDate",t.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"}),e.jsxs("select",{value:i.status,onChange:t=>F("status",t.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"SCHEDULED",children:"Scheduled"}),e.jsx("option",{value:"COMPLETED",children:"Completed"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:E?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):o.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(L,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No schedules found"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:o.map(t=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:t.module.moduleCode}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${G(t.status)}`,children:t.status})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:t.module.moduleName}),e.jsx("p",{className:"text-sm text-gray-600",children:t.batch.batchNumber})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),e.jsx("span",{children:q(t.date)})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:[z(t.startTime)," -"," ",z(t.endTime)]})]})]}),t.stats&&t.stats.attendanceCount>0&&e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Attendance"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[t.stats.attendanceCount," Marked"]})]}),e.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>b(t),className:"flex-1 flex items-center justify-center px-3 py-2 text-sm text-primary-600 bg-primary-50 rounded-lg hover:bg-primary-100 transition",children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),"Mark"]}),e.jsxs("button",{onClick:()=>y(t),className:"flex-1 flex items-center justify-center px-3 py-2 text-sm text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition",children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),"View"]})]})]},t.id))}),e.jsx("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Page ",e.jsx("span",{className:"font-medium",children:g})," of"," ",e.jsx("span",{className:"font-medium",children:f})]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>x(t=>Math.max(1,t-1)),disabled:g===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>x(t=>Math.min(f,t+1)),disabled:g===f,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})})]})})]}),r&&N&&e.jsx(ae,{isOpen:r,onClose:()=>{m(!1),S(null)},schedule:N,onSuccess:()=>{n(),d()}}),e.jsx(re,{isOpen:v,onClose:()=>{A(!1),S(null)},scheduleId:(N==null?void 0:N.id)||null})]})};export{ye as default};
