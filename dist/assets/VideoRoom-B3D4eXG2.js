import{e as Ee,g as Yr,h as $r,c as Kr,u as Gr,d as zr,r as ce,z as tt,b as rt,j as H}from"./index-Cv_EM5B3.js";import{U as Jr,V as Xr}from"./video-D6oD5f21.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=Ee("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=Ee("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=Ee("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ei=Ee("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ti=Ee("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=Ee("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=Ee("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.34l1 1L22 8v8",key:"ubwiq0"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2l10 10Z",key:"1l10zd"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),de=Object.create(null);de.open="0";de.close="1";de.ping="2";de.pong="3";de.message="4";de.upgrade="5";de.noop="6";const Ke=Object.create(null);Object.keys(de).forEach(s=>{Ke[de[s]]=s});const Bt={type:"error",data:"parser error"},Cr=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Sr=typeof ArrayBuffer=="function",Tr=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,Lt=({type:s,data:e},r,n)=>Cr&&e instanceof Blob?r?n(e):Wt(e,n):Sr&&(e instanceof ArrayBuffer||Tr(e))?r?n(e):Wt(new Blob([e]),n):n(de[s]+(e||"")),Wt=(s,e)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];e("b"+(n||""))},r.readAsDataURL(s)};function Vt(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let it;function ni(s,e){if(Cr&&s.data instanceof Blob)return s.data.arrayBuffer().then(Vt).then(e);if(Sr&&(s.data instanceof ArrayBuffer||Tr(s.data)))return e(Vt(s.data));Lt(s,!1,r=>{it||(it=new TextEncoder),e(it.encode(r))})}const Ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Me=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<Ht.length;s++)Me[Ht.charCodeAt(s)]=s;const si=s=>{let e=s.length*.75,r=s.length,n,p=0,f,g,a,_;s[s.length-1]==="="&&(e--,s[s.length-2]==="="&&e--);const v=new ArrayBuffer(e),x=new Uint8Array(v);for(n=0;n<r;n+=4)f=Me[s.charCodeAt(n)],g=Me[s.charCodeAt(n+1)],a=Me[s.charCodeAt(n+2)],_=Me[s.charCodeAt(n+3)],x[p++]=f<<2|g>>4,x[p++]=(g&15)<<4|a>>2,x[p++]=(a&3)<<6|_&63;return v},oi=typeof ArrayBuffer=="function",Mt=(s,e)=>{if(typeof s!="string")return{type:"message",data:xr(s,e)};const r=s.charAt(0);return r==="b"?{type:"message",data:ai(s.substring(1),e)}:Ke[r]?s.length>1?{type:Ke[r],data:s.substring(1)}:{type:Ke[r]}:Bt},ai=(s,e)=>{if(oi){const r=si(s);return xr(r,e)}else return{base64:!0,data:s}},xr=(s,e)=>{switch(e){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},Ar="",ci=(s,e)=>{const r=s.length,n=new Array(r);let p=0;s.forEach((f,g)=>{Lt(f,!1,a=>{n[g]=a,++p===r&&e(n.join(Ar))})})},ui=(s,e)=>{const r=s.split(Ar),n=[];for(let p=0;p<r.length;p++){const f=Mt(r[p],e);if(n.push(f),f.type==="error")break}return n};function hi(){return new TransformStream({transform(s,e){ni(s,r=>{const n=r.length;let p;if(n<126)p=new Uint8Array(1),new DataView(p.buffer).setUint8(0,n);else if(n<65536){p=new Uint8Array(3);const f=new DataView(p.buffer);f.setUint8(0,126),f.setUint16(1,n)}else{p=new Uint8Array(9);const f=new DataView(p.buffer);f.setUint8(0,127),f.setBigUint64(1,BigInt(n))}s.data&&typeof s.data!="string"&&(p[0]|=128),e.enqueue(p),e.enqueue(r)})}})}let nt;function Ue(s){return s.reduce((e,r)=>e+r.length,0)}function qe(s,e){if(s[0].length===e)return s.shift();const r=new Uint8Array(e);let n=0;for(let p=0;p<e;p++)r[p]=s[0][n++],n===s[0].length&&(s.shift(),n=0);return s.length&&n<s[0].length&&(s[0]=s[0].slice(n)),r}function li(s,e){nt||(nt=new TextDecoder);const r=[];let n=0,p=-1,f=!1;return new TransformStream({transform(g,a){for(r.push(g);;){if(n===0){if(Ue(r)<1)break;const _=qe(r,1);f=(_[0]&128)===128,p=_[0]&127,p<126?n=3:p===126?n=1:n=2}else if(n===1){if(Ue(r)<2)break;const _=qe(r,2);p=new DataView(_.buffer,_.byteOffset,_.length).getUint16(0),n=3}else if(n===2){if(Ue(r)<8)break;const _=qe(r,8),v=new DataView(_.buffer,_.byteOffset,_.length),x=v.getUint32(0);if(x>Math.pow(2,21)-1){a.enqueue(Bt);break}p=x*Math.pow(2,32)+v.getUint32(4),n=3}else{if(Ue(r)<p)break;const _=qe(r,p);a.enqueue(Mt(f?_:nt.decode(_),e)),n=0}if(p===0||p>s){a.enqueue(Bt);break}}}})}const Br=4;function ie(s){if(s)return fi(s)}function fi(s){for(var e in ie.prototype)s[e]=ie.prototype[e];return s}ie.prototype.on=ie.prototype.addEventListener=function(s,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(e),this};ie.prototype.once=function(s,e){function r(){this.off(s,r),e.apply(this,arguments)}return r.fn=e,this.on(s,r),this};ie.prototype.off=ie.prototype.removeListener=ie.prototype.removeAllListeners=ie.prototype.removeEventListener=function(s,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+s];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var n,p=0;p<r.length;p++)if(n=r[p],n===e||n.fn===e){r.splice(p,1);break}return r.length===0&&delete this._callbacks["$"+s],this};ie.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+s],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,p=r.length;n<p;++n)r[n].apply(this,e)}return this};ie.prototype.emitReserved=ie.prototype.emit;ie.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};ie.prototype.hasListeners=function(s){return!!this.listeners(s).length};const Ze=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,r)=>r(e,0),ue=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),di="arraybuffer";function Nr(s,...e){return e.reduce((r,n)=>(s.hasOwnProperty(n)&&(r[n]=s[n]),r),{})}const pi=ue.setTimeout,gi=ue.clearTimeout;function et(s,e){e.useNativeTimers?(s.setTimeoutFn=pi.bind(ue),s.clearTimeoutFn=gi.bind(ue)):(s.setTimeoutFn=ue.setTimeout.bind(ue),s.clearTimeoutFn=ue.clearTimeout.bind(ue))}const yi=1.33;function _i(s){return typeof s=="string"?mi(s):Math.ceil((s.byteLength||s.size)*yi)}function mi(s){let e=0,r=0;for(let n=0,p=s.length;n<p;n++)e=s.charCodeAt(n),e<128?r+=1:e<2048?r+=2:e<55296||e>=57344?r+=3:(n++,r+=4);return r}function kr(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function wi(s){let e="";for(let r in s)s.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(s[r]));return e}function bi(s){let e={},r=s.split("&");for(let n=0,p=r.length;n<p;n++){let f=r[n].split("=");e[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return e}class Ei extends Error{constructor(e,r,n){super(e),this.description=r,this.context=n,this.type="TransportError"}}class Dt extends ie{constructor(e){super(),this.writable=!1,et(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,r,n){return super.emitReserved("error",new Ei(e,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const r=Mt(e,this.socket.binaryType);this.onPacket(r)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,r={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const r=wi(e);return r.length?"?"+r:""}}class vi extends Dt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const r=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};ui(e,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,ci(e,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=kr()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(e,r)}}let Ir=!1;try{Ir=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ri=Ir;function Ci(){}class Si extends vi{constructor(e){if(super(e),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,r){const n=this.request({method:"POST",data:e});n.on("success",r),n.on("error",(p,f)=>{this.onError("xhr post error",p,f)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=e}}class fe extends ie{constructor(e,r,n){super(),this.createRequest=e,et(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const r=Nr(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let p in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(p)&&n.setRequestHeader(p,this._opts.extraHeaders[p])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var p;n.readyState===3&&((p=this._opts.cookieJar)===null||p===void 0||p.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(p){this.setTimeoutFn(()=>{this._onError(p)},0);return}typeof document<"u"&&(this._index=fe.requestsCount++,fe.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ci,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete fe.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}fe.requestsCount=0;fe.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Yt);else if(typeof addEventListener=="function"){const s="onpagehide"in ue?"pagehide":"unload";addEventListener(s,Yt,!1)}}function Yt(){for(let s in fe.requests)fe.requests.hasOwnProperty(s)&&fe.requests[s].abort()}const Ti=(function(){const s=Or({xdomain:!1});return s&&s.responseType!==null})();class xi extends Si{constructor(e){super(e);const r=e&&e.forceBase64;this.supportsBinary=Ti&&!r}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new fe(Or,this.uri(),e)}}function Or(s){const e=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Ri))return new XMLHttpRequest}catch{}if(!e)try{return new ue[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Fr=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Ai extends Dt{get name(){return"websocket"}doOpen(){const e=this.uri(),r=this.opts.protocols,n=Fr?{}:Nr(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,r,n)}catch(p){return this.emitReserved("error",p)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const n=e[r],p=r===e.length-1;Lt(n,this.supportsBinary,f=>{try{this.doWrite(n,f)}catch{}p&&Ze(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=kr()),this.supportsBinary||(r.b64=1),this.createUri(e,r)}}const st=ue.WebSocket||ue.MozWebSocket;class Bi extends Ai{createSocket(e,r,n){return Fr?new st(e,r,n):r?new st(e,r):new st(e)}doWrite(e,r){this.ws.send(r)}}class Ni extends Dt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const r=li(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(r).getReader(),p=hi();p.readable.pipeTo(e.writable),this._writer=p.writable.getWriter();const f=()=>{n.read().then(({done:a,value:_})=>{a||(this.onPacket(_),f())}).catch(a=>{})};f();const g={type:"open"};this.query.sid&&(g.data=`{"sid":"${this.query.sid}"}`),this._writer.write(g).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let r=0;r<e.length;r++){const n=e[r],p=r===e.length-1;this._writer.write(n).then(()=>{p&&Ze(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const ki={websocket:Bi,webtransport:Ni,polling:xi},Ii=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Oi=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Nt(s){if(s.length>8e3)throw"URI too long";const e=s,r=s.indexOf("["),n=s.indexOf("]");r!=-1&&n!=-1&&(s=s.substring(0,r)+s.substring(r,n).replace(/:/g,";")+s.substring(n,s.length));let p=Ii.exec(s||""),f={},g=14;for(;g--;)f[Oi[g]]=p[g]||"";return r!=-1&&n!=-1&&(f.source=e,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0),f.pathNames=Fi(f,f.path),f.queryKey=Li(f,f.query),f}function Fi(s,e){const r=/\/{2,9}/g,n=e.replace(r,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Li(s,e){const r={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,p,f){p&&(r[p]=f)}),r}const kt=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ge=[];kt&&addEventListener("offline",()=>{Ge.forEach(s=>s())},!1);class _e extends ie{constructor(e,r){if(super(),this.binaryType=di,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(r=e,e=null),e){const n=Nt(e);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Nt(r.host).host);et(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const p=n.prototype.name;this.transports.push(p),this._transportsByName[p]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=bi(this.opts.query)),kt&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ge.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const r=Object.assign({},this.opts.query);r.EIO=Br,r.transport=e,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&_e.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(e);r.open(),this.setTransport(r)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",_e.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=e.data,this._onError(r);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const p=this.writeBuffer[n].data;if(p&&(r+=_i(p)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ze(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,r,n){return this._sendPacket("message",e,r,n),this}send(e,r,n){return this._sendPacket("message",e,r,n),this}_sendPacket(e,r,n,p){if(typeof r=="function"&&(p=r,r=void 0),typeof n=="function"&&(p=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const f={type:e,data:r,options:n};this.emitReserved("packetCreate",f),this.writeBuffer.push(f),p&&this.once("flush",p),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),e()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(_e.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),kt&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Ge.indexOf(this._offlineEventListener);n!==-1&&Ge.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,r),this.writeBuffer=[],this._prevBufferLen=0}}}_e.protocol=Br;class Mi extends _e{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let r=this.createTransport(e),n=!1;_e.priorWebsocketSuccess=!1;const p=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",E=>{if(!n)if(E.type==="pong"&&E.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;_e.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(x(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const R=new Error("probe error");R.transport=r.name,this.emitReserved("upgradeError",R)}}))};function f(){n||(n=!0,x(),r.close(),r=null)}const g=E=>{const R=new Error("probe error: "+E);R.transport=r.name,f(),this.emitReserved("upgradeError",R)};function a(){g("transport closed")}function _(){g("socket closed")}function v(E){r&&E.name!==r.name&&f()}const x=()=>{r.removeListener("open",p),r.removeListener("error",g),r.removeListener("close",a),this.off("close",_),this.off("upgrading",v)};r.once("open",p),r.once("error",g),r.once("close",a),this.once("close",_),this.once("upgrading",v),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const r=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&r.push(e[n]);return r}}let Di=class extends Mi{constructor(e,r={}){const n=typeof e=="object"?e:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(p=>ki[p]).filter(p=>!!p)),super(e,n)}};function Pi(s,e="",r){let n=s;r=r||typeof location<"u"&&location,s==null&&(s=r.protocol+"//"+r.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=r.protocol+s:s=r.host+s),/^(https?|wss?):\/\//.test(s)||(typeof r<"u"?s=r.protocol+"//"+s:s="https://"+s),n=Nt(s)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const f=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+f+":"+n.port+e,n.href=n.protocol+"://"+f+(r&&r.port===n.port?"":":"+n.port),n}const Ui=typeof ArrayBuffer=="function",qi=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,Lr=Object.prototype.toString,ji=typeof Blob=="function"||typeof Blob<"u"&&Lr.call(Blob)==="[object BlobConstructor]",Wi=typeof File=="function"||typeof File<"u"&&Lr.call(File)==="[object FileConstructor]";function Pt(s){return Ui&&(s instanceof ArrayBuffer||qi(s))||ji&&s instanceof Blob||Wi&&s instanceof File}function ze(s,e){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let r=0,n=s.length;r<n;r++)if(ze(s[r]))return!0;return!1}if(Pt(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return ze(s.toJSON(),!0);for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&ze(s[r]))return!0;return!1}function Vi(s){const e=[],r=s.data,n=s;return n.data=It(r,e),n.attachments=e.length,{packet:n,buffers:e}}function It(s,e){if(!s)return s;if(Pt(s)){const r={_placeholder:!0,num:e.length};return e.push(s),r}else if(Array.isArray(s)){const r=new Array(s.length);for(let n=0;n<s.length;n++)r[n]=It(s[n],e);return r}else if(typeof s=="object"&&!(s instanceof Date)){const r={};for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=It(s[n],e));return r}return s}function Hi(s,e){return s.data=Ot(s.data,e),delete s.attachments,s}function Ot(s,e){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<e.length)return e[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let r=0;r<s.length;r++)s[r]=Ot(s[r],e);else if(typeof s=="object")for(const r in s)Object.prototype.hasOwnProperty.call(s,r)&&(s[r]=Ot(s[r],e));return s}const Mr=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Yi=5;var j;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(j||(j={}));class $i{constructor(e){this.replacer=e}encode(e){return(e.type===j.EVENT||e.type===j.ACK)&&ze(e)?this.encodeAsBinary({type:e.type===j.EVENT?j.BINARY_EVENT:j.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===j.BINARY_EVENT||e.type===j.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data,this.replacer)),r}encodeAsBinary(e){const r=Vi(e),n=this.encodeAsString(r.packet),p=r.buffers;return p.unshift(n),p}}class Ut extends ie{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(e);const n=r.type===j.BINARY_EVENT;n||r.type===j.BINARY_ACK?(r.type=n?j.EVENT:j.ACK,this.reconstructor=new Ki(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Pt(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0;const n={type:Number(e.charAt(0))};if(j[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===j.BINARY_EVENT||n.type===j.BINARY_ACK){const f=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);const g=e.substring(f,r);if(g!=Number(g)||e.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(g)}if(e.charAt(r+1)==="/"){const f=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););n.nsp=e.substring(f,r)}else n.nsp="/";const p=e.charAt(r+1);if(p!==""&&Number(p)==p){const f=r+1;for(;++r;){const g=e.charAt(r);if(g==null||Number(g)!=g){--r;break}if(r===e.length)break}n.id=Number(e.substring(f,r+1))}if(e.charAt(++r)){const f=this.tryParse(e.substr(r));if(Ut.isPayloadValid(n.type,f))n.data=f;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case j.CONNECT:return Xe(r);case j.DISCONNECT:return r===void 0;case j.CONNECT_ERROR:return typeof r=="string"||Xe(r);case j.EVENT:case j.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&Mr.indexOf(r[0])===-1);case j.ACK:case j.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ki{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const r=Hi(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Gi(s){return typeof s=="string"}const zi=Number.isInteger||function(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s};function Ji(s){return s===void 0||zi(s)}function Xe(s){return Object.prototype.toString.call(s)==="[object Object]"}function Xi(s,e){switch(s){case j.CONNECT:return e===void 0||Xe(e);case j.DISCONNECT:return e===void 0;case j.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&Mr.indexOf(e[0])===-1);case j.ACK:return Array.isArray(e);case j.CONNECT_ERROR:return typeof e=="string"||Xe(e);default:return!1}}function Qi(s){return Gi(s.nsp)&&Ji(s.id)&&Xi(s.type,s.data)}const Zi=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ut,Encoder:$i,get PacketType(){return j},isPacketValid:Qi,protocol:Yi},Symbol.toStringTag,{value:"Module"}));function he(s,e,r){return s.on(e,r),function(){s.off(e,r)}}const en=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Dr extends ie{constructor(e,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[he(e,"open",this.onopen.bind(this)),he(e,"packet",this.onpacket.bind(this)),he(e,"error",this.onerror.bind(this)),he(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...r){var n,p,f;if(en.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(r.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const g={type:j.EVENT,data:r};if(g.options={},g.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const x=this.ids++,E=r.pop();this._registerAckCallback(x,E),g.id=x}const a=(p=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||p===void 0?void 0:p.writable,_=this.connected&&!(!((f=this.io.engine)===null||f===void 0)&&f._hasPingExpired());return this.flags.volatile&&!a||(_?(this.notifyOutgoingListeners(g),this.packet(g)):this.sendBuffer.push(g)),this.flags={},this}_registerAckCallback(e,r){var n;const p=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(p===void 0){this.acks[e]=r;return}const f=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);r.call(this,new Error("operation has timed out"))},p),g=(...a)=>{this.io.clearTimeoutFn(f),r.apply(this,a)};g.withError=!0,this.acks[e]=g}emitWithAck(e,...r){return new Promise((n,p)=>{const f=(g,a)=>g?p(g):n(a);f.withError=!0,r.push(f),this.emit(e,...r)})}_addToQueue(e){let r;typeof e[e.length-1]=="function"&&(r=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((p,...f)=>(this._queue[0],p!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(p)):(this._queue.shift(),r&&r(null,...f)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!e||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:j.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case j.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case j.EVENT:case j.BINARY_EVENT:this.onevent(e);break;case j.ACK:case j.BINARY_ACK:this.onack(e);break;case j.DISCONNECT:this.ondisconnect();break;case j.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const r=e.data||[];e.id!=null&&r.push(this.ack(e.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const r=this;let n=!1;return function(...p){n||(n=!0,r.packet({type:j.ACK,id:e,data:p}))}}onack(e){const r=this.acks[e.id];typeof r=="function"&&(delete this.acks[e.id],r.withError&&e.data.unshift(null),r.apply(this,e.data))}onconnect(e,r){this.id=e,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:j.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,e.data)}}}function Be(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}Be.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),r=Math.floor(e*this.jitter*s);s=(Math.floor(e*10)&1)==0?s-r:s+r}return Math.min(s,this.max)|0};Be.prototype.reset=function(){this.attempts=0};Be.prototype.setMin=function(s){this.ms=s};Be.prototype.setMax=function(s){this.max=s};Be.prototype.setJitter=function(s){this.jitter=s};class Ft extends ie{constructor(e,r){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(r=e,e=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,et(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Be({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=e;const p=r.parser||Zi;this.encoder=new p.Encoder,this.decoder=new p.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var r;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(r=this.backoff)===null||r===void 0||r.setMin(e),this)}randomizationFactor(e){var r;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(r=this.backoff)===null||r===void 0||r.setJitter(e),this)}reconnectionDelayMax(e){var r;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(r=this.backoff)===null||r===void 0||r.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Di(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const p=he(r,"open",function(){n.onopen(),e&&e()}),f=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},g=he(r,"error",f);if(this._timeout!==!1){const a=this._timeout,_=this.setTimeoutFn(()=>{p(),f(new Error("timeout")),r.close()},a);this.opts.autoUnref&&_.unref(),this.subs.push(()=>{this.clearTimeoutFn(_)})}return this.subs.push(p),this.subs.push(g),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(he(e,"ping",this.onping.bind(this)),he(e,"data",this.ondata.bind(this)),he(e,"error",this.onerror.bind(this)),he(e,"close",this.onclose.bind(this)),he(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(r){this.onclose("parse error",r)}}ondecoded(e){Ze(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,r){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Dr(this,e,r),this.nsps[e]=n),n}_destroy(e){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(e){const r=this.encoder.encode(e);for(let n=0;n<r.length;n++)this.engine.write(r[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(p=>{p?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",p)):e.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Fe={};function Je(s,e){typeof s=="object"&&(e=s,s=void 0),e=e||{};const r=Pi(s,e.path||"/socket.io"),n=r.source,p=r.id,f=r.path,g=Fe[p]&&f in Fe[p].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||g;let _;return a?_=new Ft(n,e):(Fe[p]||(Fe[p]=new Ft(n,e)),_=Fe[p]),r.query&&!e.query&&(e.query=r.queryKey),_.socket(r.path,e)}Object.assign(Je,{Manager:Ft,Socket:Dr,io:Je,connect:Je});var je={exports:{}},ot,$t;function tn(){if($t)return ot;$t=1;var s=1e3,e=s*60,r=e*60,n=r*24,p=n*7,f=n*365.25;ot=function(x,E){E=E||{};var R=typeof x;if(R==="string"&&x.length>0)return g(x);if(R==="number"&&isFinite(x))return E.long?_(x):a(x);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(x))};function g(x){if(x=String(x),!(x.length>100)){var E=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(x);if(E){var R=parseFloat(E[1]),A=(E[2]||"ms").toLowerCase();switch(A){case"years":case"year":case"yrs":case"yr":case"y":return R*f;case"weeks":case"week":case"w":return R*p;case"days":case"day":case"d":return R*n;case"hours":case"hour":case"hrs":case"hr":case"h":return R*r;case"minutes":case"minute":case"mins":case"min":case"m":return R*e;case"seconds":case"second":case"secs":case"sec":case"s":return R*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return R;default:return}}}}function a(x){var E=Math.abs(x);return E>=n?Math.round(x/n)+"d":E>=r?Math.round(x/r)+"h":E>=e?Math.round(x/e)+"m":E>=s?Math.round(x/s)+"s":x+"ms"}function _(x){var E=Math.abs(x);return E>=n?v(x,E,n,"day"):E>=r?v(x,E,r,"hour"):E>=e?v(x,E,e,"minute"):E>=s?v(x,E,s,"second"):x+" ms"}function v(x,E,R,A){var c=E>=R*1.5;return Math.round(x/R)+" "+A+(c?"s":"")}return ot}var at,Kt;function rn(){if(Kt)return at;Kt=1;function s(e){n.debug=n,n.default=n,n.coerce=v,n.disable=a,n.enable=f,n.enabled=_,n.humanize=tn(),n.destroy=x,Object.keys(e).forEach(E=>{n[E]=e[E]}),n.names=[],n.skips=[],n.formatters={};function r(E){let R=0;for(let A=0;A<E.length;A++)R=(R<<5)-R+E.charCodeAt(A),R|=0;return n.colors[Math.abs(R)%n.colors.length]}n.selectColor=r;function n(E){let R,A=null,c,m;function w(...d){if(!w.enabled)return;const b=w,B=Number(new Date),F=B-(R||B);b.diff=F,b.prev=R,b.curr=B,R=B,d[0]=n.coerce(d[0]),typeof d[0]!="string"&&d.unshift("%O");let I=0;d[0]=d[0].replace(/%([a-zA-Z%])/g,(q,D)=>{if(q==="%%")return"%";I++;const U=n.formatters[D];if(typeof U=="function"){const K=d[I];q=U.call(b,K),d.splice(I,1),I--}return q}),n.formatArgs.call(b,d),(b.log||n.log).apply(b,d)}return w.namespace=E,w.useColors=n.useColors(),w.color=n.selectColor(E),w.extend=p,w.destroy=n.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>A!==null?A:(c!==n.namespaces&&(c=n.namespaces,m=n.enabled(E)),m),set:d=>{A=d}}),typeof n.init=="function"&&n.init(w),w}function p(E,R){const A=n(this.namespace+(typeof R>"u"?":":R)+E);return A.log=this.log,A}function f(E){n.save(E),n.namespaces=E,n.names=[],n.skips=[];const R=(typeof E=="string"?E:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const A of R)A[0]==="-"?n.skips.push(A.slice(1)):n.names.push(A)}function g(E,R){let A=0,c=0,m=-1,w=0;for(;A<E.length;)if(c<R.length&&(R[c]===E[A]||R[c]==="*"))R[c]==="*"?(m=c,w=A,c++):(A++,c++);else if(m!==-1)c=m+1,w++,A=w;else return!1;for(;c<R.length&&R[c]==="*";)c++;return c===R.length}function a(){const E=[...n.names,...n.skips.map(R=>"-"+R)].join(",");return n.enable(""),E}function _(E){for(const R of n.skips)if(g(E,R))return!1;for(const R of n.names)if(g(E,R))return!0;return!1}function v(E){return E instanceof Error?E.stack||E.message:E}function x(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return at=s,at}var Gt;function nn(){return Gt||(Gt=1,(function(s,e){var r={};e.formatArgs=p,e.save=f,e.load=g,e.useColors=n,e.storage=a(),e.destroy=(()=>{let v=!1;return()=>{v||(v=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let v;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(v=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(v[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function p(v){if(v[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+v[0]+(this.useColors?"%c ":" ")+"+"+s.exports.humanize(this.diff),!this.useColors)return;const x="color: "+this.color;v.splice(1,0,x,"color: inherit");let E=0,R=0;v[0].replace(/%[a-zA-Z%]/g,A=>{A!=="%%"&&(E++,A==="%c"&&(R=E))}),v.splice(R,0,x)}e.log=console.debug||console.log||(()=>{});function f(v){try{v?e.storage.setItem("debug",v):e.storage.removeItem("debug")}catch{}}function g(){let v;try{v=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!v&&typeof process<"u"&&"env"in process&&(v=r.DEBUG),v}function a(){try{return localStorage}catch{}}s.exports=rn()(e);const{formatters:_}=s.exports;_.j=function(v){try{return JSON.stringify(v)}catch(x){return"[UnexpectedJSONParseError]: "+x.message}}})(je,je.exports)),je.exports}var ct,zt;function sn(){return zt||(zt=1,ct=function(){if(typeof globalThis>"u")return null;var e={RTCPeerConnection:globalThis.RTCPeerConnection||globalThis.mozRTCPeerConnection||globalThis.webkitRTCPeerConnection,RTCSessionDescription:globalThis.RTCSessionDescription||globalThis.mozRTCSessionDescription||globalThis.webkitRTCSessionDescription,RTCIceCandidate:globalThis.RTCIceCandidate||globalThis.mozRTCIceCandidate||globalThis.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}),ct}var We={exports:{}},Ve={exports:{}},ut={},Le={},Jt;function on(){if(Jt)return Le;Jt=1,Le.byteLength=a,Le.toByteArray=v,Le.fromByteArray=R;for(var s=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,f=n.length;p<f;++p)s[p]=n[p],e[n.charCodeAt(p)]=p;e[45]=62,e[95]=63;function g(A){var c=A.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var m=A.indexOf("=");m===-1&&(m=c);var w=m===c?0:4-m%4;return[m,w]}function a(A){var c=g(A),m=c[0],w=c[1];return(m+w)*3/4-w}function _(A,c,m){return(c+m)*3/4-m}function v(A){var c,m=g(A),w=m[0],d=m[1],b=new r(_(A,w,d)),B=0,F=d>0?w-4:w,I;for(I=0;I<F;I+=4)c=e[A.charCodeAt(I)]<<18|e[A.charCodeAt(I+1)]<<12|e[A.charCodeAt(I+2)]<<6|e[A.charCodeAt(I+3)],b[B++]=c>>16&255,b[B++]=c>>8&255,b[B++]=c&255;return d===2&&(c=e[A.charCodeAt(I)]<<2|e[A.charCodeAt(I+1)]>>4,b[B++]=c&255),d===1&&(c=e[A.charCodeAt(I)]<<10|e[A.charCodeAt(I+1)]<<4|e[A.charCodeAt(I+2)]>>2,b[B++]=c>>8&255,b[B++]=c&255),b}function x(A){return s[A>>18&63]+s[A>>12&63]+s[A>>6&63]+s[A&63]}function E(A,c,m){for(var w,d=[],b=c;b<m;b+=3)w=(A[b]<<16&16711680)+(A[b+1]<<8&65280)+(A[b+2]&255),d.push(x(w));return d.join("")}function R(A){for(var c,m=A.length,w=m%3,d=[],b=16383,B=0,F=m-w;B<F;B+=b)d.push(E(A,B,B+b>F?F:B+b));return w===1?(c=A[m-1],d.push(s[c>>2]+s[c<<4&63]+"==")):w===2&&(c=(A[m-2]<<8)+A[m-1],d.push(s[c>>10]+s[c>>4&63]+s[c<<2&63]+"=")),d.join("")}return Le}var He={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Xt;function an(){return Xt||(Xt=1,He.read=function(s,e,r,n,p){var f,g,a=p*8-n-1,_=(1<<a)-1,v=_>>1,x=-7,E=r?p-1:0,R=r?-1:1,A=s[e+E];for(E+=R,f=A&(1<<-x)-1,A>>=-x,x+=a;x>0;f=f*256+s[e+E],E+=R,x-=8);for(g=f&(1<<-x)-1,f>>=-x,x+=n;x>0;g=g*256+s[e+E],E+=R,x-=8);if(f===0)f=1-v;else{if(f===_)return g?NaN:(A?-1:1)*(1/0);g=g+Math.pow(2,n),f=f-v}return(A?-1:1)*g*Math.pow(2,f-n)},He.write=function(s,e,r,n,p,f){var g,a,_,v=f*8-p-1,x=(1<<v)-1,E=x>>1,R=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,A=n?0:f-1,c=n?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,g=x):(g=Math.floor(Math.log(e)/Math.LN2),e*(_=Math.pow(2,-g))<1&&(g--,_*=2),g+E>=1?e+=R/_:e+=R*Math.pow(2,1-E),e*_>=2&&(g++,_/=2),g+E>=x?(a=0,g=x):g+E>=1?(a=(e*_-1)*Math.pow(2,p),g=g+E):(a=e*Math.pow(2,E-1)*Math.pow(2,p),g=0));p>=8;s[r+A]=a&255,A+=c,a/=256,p-=8);for(g=g<<p|a,v+=p;v>0;s[r+A]=g&255,A+=c,g/=256,v-=8);s[r+A-c]|=m*128}),He}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Qt;function De(){return Qt||(Qt=1,(function(s){const e=on(),r=an(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;s.Buffer=a,s.SlowBuffer=b,s.INSPECT_MAX_BYTES=50;const p=2147483647;s.kMaxLength=p,a.TYPED_ARRAY_SUPPORT=f(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function f(){try{const o=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(o,t),o.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function g(o){if(o>p)throw new RangeError('The value "'+o+'" is invalid for option "size"');const t=new Uint8Array(o);return Object.setPrototypeOf(t,a.prototype),t}function a(o,t,i){if(typeof o=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(o)}return _(o,t,i)}a.poolSize=8192;function _(o,t,i){if(typeof o=="string")return R(o,t);if(ArrayBuffer.isView(o))return c(o);if(o==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o);if(oe(o,ArrayBuffer)||o&&oe(o.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(oe(o,SharedArrayBuffer)||o&&oe(o.buffer,SharedArrayBuffer)))return m(o,t,i);if(typeof o=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const u=o.valueOf&&o.valueOf();if(u!=null&&u!==o)return a.from(u,t,i);const y=w(o);if(y)return y;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof o[Symbol.toPrimitive]=="function")return a.from(o[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof o)}a.from=function(o,t,i){return _(o,t,i)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function v(o){if(typeof o!="number")throw new TypeError('"size" argument must be of type number');if(o<0)throw new RangeError('The value "'+o+'" is invalid for option "size"')}function x(o,t,i){return v(o),o<=0?g(o):t!==void 0?typeof i=="string"?g(o).fill(t,i):g(o).fill(t):g(o)}a.alloc=function(o,t,i){return x(o,t,i)};function E(o){return v(o),g(o<0?0:d(o)|0)}a.allocUnsafe=function(o){return E(o)},a.allocUnsafeSlow=function(o){return E(o)};function R(o,t){if((typeof t!="string"||t==="")&&(t="utf8"),!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const i=B(o,t)|0;let u=g(i);const y=u.write(o,t);return y!==i&&(u=u.slice(0,y)),u}function A(o){const t=o.length<0?0:d(o.length)|0,i=g(t);for(let u=0;u<t;u+=1)i[u]=o[u]&255;return i}function c(o){if(oe(o,Uint8Array)){const t=new Uint8Array(o);return m(t.buffer,t.byteOffset,t.byteLength)}return A(o)}function m(o,t,i){if(t<0||o.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');let u;return t===void 0&&i===void 0?u=new Uint8Array(o):i===void 0?u=new Uint8Array(o,t):u=new Uint8Array(o,t,i),Object.setPrototypeOf(u,a.prototype),u}function w(o){if(a.isBuffer(o)){const t=d(o.length)|0,i=g(t);return i.length===0||o.copy(i,0,0,t),i}if(o.length!==void 0)return typeof o.length!="number"||we(o.length)?g(0):A(o);if(o.type==="Buffer"&&Array.isArray(o.data))return A(o.data)}function d(o){if(o>=p)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+p.toString(16)+" bytes");return o|0}function b(o){return+o!=o&&(o=0),a.alloc(+o)}a.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==a.prototype},a.compare=function(t,i){if(oe(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),oe(i,Uint8Array)&&(i=a.from(i,i.offset,i.byteLength)),!a.isBuffer(t)||!a.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===i)return 0;let u=t.length,y=i.length;for(let S=0,N=Math.min(u,y);S<N;++S)if(t[S]!==i[S]){u=t[S],y=i[S];break}return u<y?-1:y<u?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,i){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return a.alloc(0);let u;if(i===void 0)for(i=0,u=0;u<t.length;++u)i+=t[u].length;const y=a.allocUnsafe(i);let S=0;for(u=0;u<t.length;++u){let N=t[u];if(oe(N,Uint8Array))S+N.length>y.length?(a.isBuffer(N)||(N=a.from(N)),N.copy(y,S)):Uint8Array.prototype.set.call(y,N,S);else if(a.isBuffer(N))N.copy(y,S);else throw new TypeError('"list" argument must be an Array of Buffers');S+=N.length}return y};function B(o,t){if(a.isBuffer(o))return o.length;if(ArrayBuffer.isView(o)||oe(o,ArrayBuffer))return o.byteLength;if(typeof o!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof o);const i=o.length,u=arguments.length>2&&arguments[2]===!0;if(!u&&i===0)return 0;let y=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return G(o).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return Ie(o).length;default:if(y)return u?-1:G(o).length;t=(""+t).toLowerCase(),y=!0}}a.byteLength=B;function F(o,t,i){let u=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,t>>>=0,i<=t))return"";for(o||(o="utf8");;)switch(o){case"hex":return ge(this,t,i);case"utf8":case"utf-8":return se(this,t,i);case"ascii":return pe(this,t,i);case"latin1":case"binary":return ve(this,t,i);case"base64":return J(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Re(this,t,i);default:if(u)throw new TypeError("Unknown encoding: "+o);o=(o+"").toLowerCase(),u=!0}}a.prototype._isBuffer=!0;function I(o,t,i){const u=o[t];o[t]=o[i],o[i]=u}a.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let i=0;i<t;i+=2)I(this,i,i+1);return this},a.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let i=0;i<t;i+=4)I(this,i,i+3),I(this,i+1,i+2);return this},a.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let i=0;i<t;i+=8)I(this,i,i+7),I(this,i+1,i+6),I(this,i+2,i+5),I(this,i+3,i+4);return this},a.prototype.toString=function(){const t=this.length;return t===0?"":arguments.length===0?se(this,0,t):F.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:a.compare(this,t)===0},a.prototype.inspect=function(){let t="";const i=s.INSPECT_MAX_BYTES;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(t,i,u,y,S){if(oe(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(i===void 0&&(i=0),u===void 0&&(u=t?t.length:0),y===void 0&&(y=0),S===void 0&&(S=this.length),i<0||u>t.length||y<0||S>this.length)throw new RangeError("out of range index");if(y>=S&&i>=u)return 0;if(y>=S)return-1;if(i>=u)return 1;if(i>>>=0,u>>>=0,y>>>=0,S>>>=0,this===t)return 0;let N=S-y,Y=u-i;const ee=Math.min(N,Y),Q=this.slice(y,S),te=t.slice(i,u);for(let z=0;z<ee;++z)if(Q[z]!==te[z]){N=Q[z],Y=te[z];break}return N<Y?-1:Y<N?1:0};function L(o,t,i,u,y){if(o.length===0)return-1;if(typeof i=="string"?(u=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,we(i)&&(i=y?0:o.length-1),i<0&&(i=o.length+i),i>=o.length){if(y)return-1;i=o.length-1}else if(i<0)if(y)i=0;else return-1;if(typeof t=="string"&&(t=a.from(t,u)),a.isBuffer(t))return t.length===0?-1:q(o,t,i,u,y);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?y?Uint8Array.prototype.indexOf.call(o,t,i):Uint8Array.prototype.lastIndexOf.call(o,t,i):q(o,[t],i,u,y);throw new TypeError("val must be string, number or Buffer")}function q(o,t,i,u,y){let S=1,N=o.length,Y=t.length;if(u!==void 0&&(u=String(u).toLowerCase(),u==="ucs2"||u==="ucs-2"||u==="utf16le"||u==="utf-16le")){if(o.length<2||t.length<2)return-1;S=2,N/=2,Y/=2,i/=2}function ee(te,z){return S===1?te[z]:te.readUInt16BE(z*S)}let Q;if(y){let te=-1;for(Q=i;Q<N;Q++)if(ee(o,Q)===ee(t,te===-1?0:Q-te)){if(te===-1&&(te=Q),Q-te+1===Y)return te*S}else te!==-1&&(Q-=Q-te),te=-1}else for(i+Y>N&&(i=N-Y),Q=i;Q>=0;Q--){let te=!0;for(let z=0;z<Y;z++)if(ee(o,Q+z)!==ee(t,z)){te=!1;break}if(te)return Q}return-1}a.prototype.includes=function(t,i,u){return this.indexOf(t,i,u)!==-1},a.prototype.indexOf=function(t,i,u){return L(this,t,i,u,!0)},a.prototype.lastIndexOf=function(t,i,u){return L(this,t,i,u,!1)};function D(o,t,i,u){i=Number(i)||0;const y=o.length-i;u?(u=Number(u),u>y&&(u=y)):u=y;const S=t.length;u>S/2&&(u=S/2);let N;for(N=0;N<u;++N){const Y=parseInt(t.substr(N*2,2),16);if(we(Y))return N;o[i+N]=Y}return N}function U(o,t,i,u){return xe(G(t,o.length-i),o,i,u)}function K(o,t,i,u){return xe(ye(t),o,i,u)}function $(o,t,i,u){return xe(Ie(t),o,i,u)}function re(o,t,i,u){return xe(Te(t,o.length-i),o,i,u)}a.prototype.write=function(t,i,u,y){if(i===void 0)y="utf8",u=this.length,i=0;else if(u===void 0&&typeof i=="string")y=i,u=this.length,i=0;else if(isFinite(i))i=i>>>0,isFinite(u)?(u=u>>>0,y===void 0&&(y="utf8")):(y=u,u=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const S=this.length-i;if((u===void 0||u>S)&&(u=S),t.length>0&&(u<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");y||(y="utf8");let N=!1;for(;;)switch(y){case"hex":return D(this,t,i,u);case"utf8":case"utf-8":return U(this,t,i,u);case"ascii":case"latin1":case"binary":return K(this,t,i,u);case"base64":return $(this,t,i,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,t,i,u);default:if(N)throw new TypeError("Unknown encoding: "+y);y=(""+y).toLowerCase(),N=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function J(o,t,i){return t===0&&i===o.length?e.fromByteArray(o):e.fromByteArray(o.slice(t,i))}function se(o,t,i){i=Math.min(o.length,i);const u=[];let y=t;for(;y<i;){const S=o[y];let N=null,Y=S>239?4:S>223?3:S>191?2:1;if(y+Y<=i){let ee,Q,te,z;switch(Y){case 1:S<128&&(N=S);break;case 2:ee=o[y+1],(ee&192)===128&&(z=(S&31)<<6|ee&63,z>127&&(N=z));break;case 3:ee=o[y+1],Q=o[y+2],(ee&192)===128&&(Q&192)===128&&(z=(S&15)<<12|(ee&63)<<6|Q&63,z>2047&&(z<55296||z>57343)&&(N=z));break;case 4:ee=o[y+1],Q=o[y+2],te=o[y+3],(ee&192)===128&&(Q&192)===128&&(te&192)===128&&(z=(S&15)<<18|(ee&63)<<12|(Q&63)<<6|te&63,z>65535&&z<1114112&&(N=z))}}N===null?(N=65533,Y=1):N>65535&&(N-=65536,u.push(N>>>10&1023|55296),N=56320|N&1023),u.push(N),y+=Y}return ke(u)}const me=4096;function ke(o){const t=o.length;if(t<=me)return String.fromCharCode.apply(String,o);let i="",u=0;for(;u<t;)i+=String.fromCharCode.apply(String,o.slice(u,u+=me));return i}function pe(o,t,i){let u="";i=Math.min(o.length,i);for(let y=t;y<i;++y)u+=String.fromCharCode(o[y]&127);return u}function ve(o,t,i){let u="";i=Math.min(o.length,i);for(let y=t;y<i;++y)u+=String.fromCharCode(o[y]);return u}function ge(o,t,i){const u=o.length;(!t||t<0)&&(t=0),(!i||i<0||i>u)&&(i=u);let y="";for(let S=t;S<i;++S)y+=Oe[o[S]];return y}function Re(o,t,i){const u=o.slice(t,i);let y="";for(let S=0;S<u.length-1;S+=2)y+=String.fromCharCode(u[S]+u[S+1]*256);return y}a.prototype.slice=function(t,i){const u=this.length;t=~~t,i=i===void 0?u:~~i,t<0?(t+=u,t<0&&(t=0)):t>u&&(t=u),i<0?(i+=u,i<0&&(i=0)):i>u&&(i=u),i<t&&(i=t);const y=this.subarray(t,i);return Object.setPrototypeOf(y,a.prototype),y};function Z(o,t,i){if(o%1!==0||o<0)throw new RangeError("offset is not uint");if(o+t>i)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(t,i,u){t=t>>>0,i=i>>>0,u||Z(t,i,this.length);let y=this[t],S=1,N=0;for(;++N<i&&(S*=256);)y+=this[t+N]*S;return y},a.prototype.readUintBE=a.prototype.readUIntBE=function(t,i,u){t=t>>>0,i=i>>>0,u||Z(t,i,this.length);let y=this[t+--i],S=1;for(;i>0&&(S*=256);)y+=this[t+--i]*S;return y},a.prototype.readUint8=a.prototype.readUInt8=function(t,i){return t=t>>>0,i||Z(t,1,this.length),this[t]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(t,i){return t=t>>>0,i||Z(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(t,i){return t=t>>>0,i||Z(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(t,i){return t=t>>>0,i||Z(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(t,i){return t=t>>>0,i||Z(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readBigUInt64LE=ae(function(t){t=t>>>0,k(t,"offset");const i=this[t],u=this[t+7];(i===void 0||u===void 0)&&M(t,this.length-8);const y=i+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,S=this[++t]+this[++t]*2**8+this[++t]*2**16+u*2**24;return BigInt(y)+(BigInt(S)<<BigInt(32))}),a.prototype.readBigUInt64BE=ae(function(t){t=t>>>0,k(t,"offset");const i=this[t],u=this[t+7];(i===void 0||u===void 0)&&M(t,this.length-8);const y=i*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],S=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+u;return(BigInt(y)<<BigInt(32))+BigInt(S)}),a.prototype.readIntLE=function(t,i,u){t=t>>>0,i=i>>>0,u||Z(t,i,this.length);let y=this[t],S=1,N=0;for(;++N<i&&(S*=256);)y+=this[t+N]*S;return S*=128,y>=S&&(y-=Math.pow(2,8*i)),y},a.prototype.readIntBE=function(t,i,u){t=t>>>0,i=i>>>0,u||Z(t,i,this.length);let y=i,S=1,N=this[t+--y];for(;y>0&&(S*=256);)N+=this[t+--y]*S;return S*=128,N>=S&&(N-=Math.pow(2,8*i)),N},a.prototype.readInt8=function(t,i){return t=t>>>0,i||Z(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},a.prototype.readInt16LE=function(t,i){t=t>>>0,i||Z(t,2,this.length);const u=this[t]|this[t+1]<<8;return u&32768?u|4294901760:u},a.prototype.readInt16BE=function(t,i){t=t>>>0,i||Z(t,2,this.length);const u=this[t+1]|this[t]<<8;return u&32768?u|4294901760:u},a.prototype.readInt32LE=function(t,i){return t=t>>>0,i||Z(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,i){return t=t>>>0,i||Z(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readBigInt64LE=ae(function(t){t=t>>>0,k(t,"offset");const i=this[t],u=this[t+7];(i===void 0||u===void 0)&&M(t,this.length-8);const y=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(u<<24);return(BigInt(y)<<BigInt(32))+BigInt(i+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}),a.prototype.readBigInt64BE=ae(function(t){t=t>>>0,k(t,"offset");const i=this[t],u=this[t+7];(i===void 0||u===void 0)&&M(t,this.length-8);const y=(i<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(y)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+u)}),a.prototype.readFloatLE=function(t,i){return t=t>>>0,i||Z(t,4,this.length),r.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,i){return t=t>>>0,i||Z(t,4,this.length),r.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,i){return t=t>>>0,i||Z(t,8,this.length),r.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,i){return t=t>>>0,i||Z(t,8,this.length),r.read(this,t,!1,52,8)};function ne(o,t,i,u,y,S){if(!a.isBuffer(o))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>y||t<S)throw new RangeError('"value" argument is out of bounds');if(i+u>o.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(t,i,u,y){if(t=+t,i=i>>>0,u=u>>>0,!y){const Y=Math.pow(2,8*u)-1;ne(this,t,i,u,Y,0)}let S=1,N=0;for(this[i]=t&255;++N<u&&(S*=256);)this[i+N]=t/S&255;return i+u},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(t,i,u,y){if(t=+t,i=i>>>0,u=u>>>0,!y){const Y=Math.pow(2,8*u)-1;ne(this,t,i,u,Y,0)}let S=u-1,N=1;for(this[i+S]=t&255;--S>=0&&(N*=256);)this[i+S]=t/N&255;return i+u},a.prototype.writeUint8=a.prototype.writeUInt8=function(t,i,u){return t=+t,i=i>>>0,u||ne(this,t,i,1,255,0),this[i]=t&255,i+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(t,i,u){return t=+t,i=i>>>0,u||ne(this,t,i,2,65535,0),this[i]=t&255,this[i+1]=t>>>8,i+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(t,i,u){return t=+t,i=i>>>0,u||ne(this,t,i,2,65535,0),this[i]=t>>>8,this[i+1]=t&255,i+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(t,i,u){return t=+t,i=i>>>0,u||ne(this,t,i,4,4294967295,0),this[i+3]=t>>>24,this[i+2]=t>>>16,this[i+1]=t>>>8,this[i]=t&255,i+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(t,i,u){return t=+t,i=i>>>0,u||ne(this,t,i,4,4294967295,0),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255,i+4};function le(o,t,i,u,y){l(t,u,y,o,i,7);let S=Number(t&BigInt(4294967295));o[i++]=S,S=S>>8,o[i++]=S,S=S>>8,o[i++]=S,S=S>>8,o[i++]=S;let N=Number(t>>BigInt(32)&BigInt(4294967295));return o[i++]=N,N=N>>8,o[i++]=N,N=N>>8,o[i++]=N,N=N>>8,o[i++]=N,i}function Ce(o,t,i,u,y){l(t,u,y,o,i,7);let S=Number(t&BigInt(4294967295));o[i+7]=S,S=S>>8,o[i+6]=S,S=S>>8,o[i+5]=S,S=S>>8,o[i+4]=S;let N=Number(t>>BigInt(32)&BigInt(4294967295));return o[i+3]=N,N=N>>8,o[i+2]=N,N=N>>8,o[i+1]=N,N=N>>8,o[i]=N,i+8}a.prototype.writeBigUInt64LE=ae(function(t,i=0){return le(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ae(function(t,i=0){return Ce(this,t,i,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(t,i,u,y){if(t=+t,i=i>>>0,!y){const ee=Math.pow(2,8*u-1);ne(this,t,i,u,ee-1,-ee)}let S=0,N=1,Y=0;for(this[i]=t&255;++S<u&&(N*=256);)t<0&&Y===0&&this[i+S-1]!==0&&(Y=1),this[i+S]=(t/N>>0)-Y&255;return i+u},a.prototype.writeIntBE=function(t,i,u,y){if(t=+t,i=i>>>0,!y){const ee=Math.pow(2,8*u-1);ne(this,t,i,u,ee-1,-ee)}let S=u-1,N=1,Y=0;for(this[i+S]=t&255;--S>=0&&(N*=256);)t<0&&Y===0&&this[i+S+1]!==0&&(Y=1),this[i+S]=(t/N>>0)-Y&255;return i+u},a.prototype.writeInt8=function(t,i,u){return t=+t,i=i>>>0,u||ne(this,t,i,1,127,-128),t<0&&(t=255+t+1),this[i]=t&255,i+1},a.prototype.writeInt16LE=function(t,i,u){return t=+t,i=i>>>0,u||ne(this,t,i,2,32767,-32768),this[i]=t&255,this[i+1]=t>>>8,i+2},a.prototype.writeInt16BE=function(t,i,u){return t=+t,i=i>>>0,u||ne(this,t,i,2,32767,-32768),this[i]=t>>>8,this[i+1]=t&255,i+2},a.prototype.writeInt32LE=function(t,i,u){return t=+t,i=i>>>0,u||ne(this,t,i,4,2147483647,-2147483648),this[i]=t&255,this[i+1]=t>>>8,this[i+2]=t>>>16,this[i+3]=t>>>24,i+4},a.prototype.writeInt32BE=function(t,i,u){return t=+t,i=i>>>0,u||ne(this,t,i,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[i]=t>>>24,this[i+1]=t>>>16,this[i+2]=t>>>8,this[i+3]=t&255,i+4},a.prototype.writeBigInt64LE=ae(function(t,i=0){return le(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ae(function(t,i=0){return Ce(this,t,i,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Se(o,t,i,u,y,S){if(i+u>o.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function T(o,t,i,u,y){return t=+t,i=i>>>0,y||Se(o,t,i,4),r.write(o,t,i,u,23,4),i+4}a.prototype.writeFloatLE=function(t,i,u){return T(this,t,i,!0,u)},a.prototype.writeFloatBE=function(t,i,u){return T(this,t,i,!1,u)};function C(o,t,i,u,y){return t=+t,i=i>>>0,y||Se(o,t,i,8),r.write(o,t,i,u,52,8),i+8}a.prototype.writeDoubleLE=function(t,i,u){return C(this,t,i,!0,u)},a.prototype.writeDoubleBE=function(t,i,u){return C(this,t,i,!1,u)},a.prototype.copy=function(t,i,u,y){if(!a.isBuffer(t))throw new TypeError("argument should be a Buffer");if(u||(u=0),!y&&y!==0&&(y=this.length),i>=t.length&&(i=t.length),i||(i=0),y>0&&y<u&&(y=u),y===u||t.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(u<0||u>=this.length)throw new RangeError("Index out of range");if(y<0)throw new RangeError("sourceEnd out of bounds");y>this.length&&(y=this.length),t.length-i<y-u&&(y=t.length-i+u);const S=y-u;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(i,u,y):Uint8Array.prototype.set.call(t,this.subarray(u,y),i),S},a.prototype.fill=function(t,i,u,y){if(typeof t=="string"){if(typeof i=="string"?(y=i,i=0,u=this.length):typeof u=="string"&&(y=u,u=this.length),y!==void 0&&typeof y!="string")throw new TypeError("encoding must be a string");if(typeof y=="string"&&!a.isEncoding(y))throw new TypeError("Unknown encoding: "+y);if(t.length===1){const N=t.charCodeAt(0);(y==="utf8"&&N<128||y==="latin1")&&(t=N)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(i<0||this.length<i||this.length<u)throw new RangeError("Out of range index");if(u<=i)return this;i=i>>>0,u=u===void 0?this.length:u>>>0,t||(t=0);let S;if(typeof t=="number")for(S=i;S<u;++S)this[S]=t;else{const N=a.isBuffer(t)?t:a.from(t,y),Y=N.length;if(Y===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(S=0;S<u-i;++S)this[S+i]=N[S%Y]}return this};const O={};function P(o,t,i){O[o]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${o}]`,this.stack,delete this.name}get code(){return o}set code(y){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:y,writable:!0})}toString(){return`${this.name} [${o}]: ${this.message}`}}}P("ERR_BUFFER_OUT_OF_BOUNDS",function(o){return o?`${o} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),P("ERR_INVALID_ARG_TYPE",function(o,t){return`The "${o}" argument must be of type number. Received type ${typeof t}`},TypeError),P("ERR_OUT_OF_RANGE",function(o,t,i){let u=`The value of "${o}" is out of range.`,y=i;return Number.isInteger(i)&&Math.abs(i)>2**32?y=W(String(i)):typeof i=="bigint"&&(y=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(y=W(y)),y+="n"),u+=` It must be ${t}. Received ${y}`,u},RangeError);function W(o){let t="",i=o.length;const u=o[0]==="-"?1:0;for(;i>=u+4;i-=3)t=`_${o.slice(i-3,i)}${t}`;return`${o.slice(0,i)}${t}`}function h(o,t,i){k(t,"offset"),(o[t]===void 0||o[t+i]===void 0)&&M(t,o.length-(i+1))}function l(o,t,i,u,y,S){if(o>i||o<t){const N=typeof t=="bigint"?"n":"";let Y;throw t===0||t===BigInt(0)?Y=`>= 0${N} and < 2${N} ** ${(S+1)*8}${N}`:Y=`>= -(2${N} ** ${(S+1)*8-1}${N}) and < 2 ** ${(S+1)*8-1}${N}`,new O.ERR_OUT_OF_RANGE("value",Y,o)}h(u,y,S)}function k(o,t){if(typeof o!="number")throw new O.ERR_INVALID_ARG_TYPE(t,"number",o)}function M(o,t,i){throw Math.floor(o)!==o?(k(o,i),new O.ERR_OUT_OF_RANGE("offset","an integer",o)):t<0?new O.ERR_BUFFER_OUT_OF_BOUNDS:new O.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,o)}const X=/[^+/0-9A-Za-z-_]/g;function V(o){if(o=o.split("=")[0],o=o.trim().replace(X,""),o.length<2)return"";for(;o.length%4!==0;)o=o+"=";return o}function G(o,t){t=t||1/0;let i;const u=o.length;let y=null;const S=[];for(let N=0;N<u;++N){if(i=o.charCodeAt(N),i>55295&&i<57344){if(!y){if(i>56319){(t-=3)>-1&&S.push(239,191,189);continue}else if(N+1===u){(t-=3)>-1&&S.push(239,191,189);continue}y=i;continue}if(i<56320){(t-=3)>-1&&S.push(239,191,189),y=i;continue}i=(y-55296<<10|i-56320)+65536}else y&&(t-=3)>-1&&S.push(239,191,189);if(y=null,i<128){if((t-=1)<0)break;S.push(i)}else if(i<2048){if((t-=2)<0)break;S.push(i>>6|192,i&63|128)}else if(i<65536){if((t-=3)<0)break;S.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((t-=4)<0)break;S.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return S}function ye(o){const t=[];for(let i=0;i<o.length;++i)t.push(o.charCodeAt(i)&255);return t}function Te(o,t){let i,u,y;const S=[];for(let N=0;N<o.length&&!((t-=2)<0);++N)i=o.charCodeAt(N),u=i>>8,y=i%256,S.push(y),S.push(u);return S}function Ie(o){return e.toByteArray(V(o))}function xe(o,t,i,u){let y;for(y=0;y<u&&!(y+i>=t.length||y>=o.length);++y)t[y+i]=o[y];return y}function oe(o,t){return o instanceof t||o!=null&&o.constructor!=null&&o.constructor.name!=null&&o.constructor.name===t.name}function we(o){return o!==o}const Oe=(function(){const o="0123456789abcdef",t=new Array(256);for(let i=0;i<16;++i){const u=i*16;for(let y=0;y<16;++y)t[u+y]=o[i]+o[y]}return t})();function ae(o){return typeof BigInt>"u"?be:o}function be(){throw new Error("BigInt not supported")}})(ut)),ut}/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Zt;function Pr(){return Zt||(Zt=1,(function(s,e){var r=De(),n=r.Buffer;function p(g,a){for(var _ in g)a[_]=g[_]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?s.exports=r:(p(r,e),e.Buffer=f);function f(g,a,_){return n(g,a,_)}f.prototype=Object.create(n.prototype),p(n,f),f.from=function(g,a,_){if(typeof g=="number")throw new TypeError("Argument must not be a number");return n(g,a,_)},f.alloc=function(g,a,_){if(typeof g!="number")throw new TypeError("Argument must be a number");var v=n(g);return a!==void 0?typeof _=="string"?v.fill(a,_):v.fill(a):v.fill(0),v},f.allocUnsafe=function(g){if(typeof g!="number")throw new TypeError("Argument must be a number");return n(g)},f.allocUnsafeSlow=function(g){if(typeof g!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(g)}})(Ve,Ve.exports)),Ve.exports}var er;function cn(){if(er)return We.exports;er=1;var s=65536,e=4294967295;function r(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var n=Pr().Buffer,p=globalThis.crypto||globalThis.msCrypto;p&&p.getRandomValues?We.exports=f:We.exports=r;function f(g,a){if(g>e)throw new RangeError("requested too many random bytes");var _=n.allocUnsafe(g);if(g>0)if(g>s)for(var v=0;v<g;v+=s)p.getRandomValues(_.slice(v,v+s));else p.getRandomValues(_);return typeof a=="function"?process.nextTick(function(){a(null,_)}):_}return We.exports}var Ye={exports:{}};const un={},hn=Object.freeze(Object.defineProperty({__proto__:null,default:un},Symbol.toStringTag,{value:"Module"})),Qe=Yr(hn);var ht,tr;function Ur(){return tr||(tr=1,ht=Qe.EventEmitter),ht}var lt,rr;function ln(){if(rr)return lt;rr=1;function s(c,m){var w=Object.keys(c);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(c);m&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(c,b).enumerable})),w.push.apply(w,d)}return w}function e(c){for(var m=1;m<arguments.length;m++){var w=arguments[m]!=null?arguments[m]:{};m%2?s(Object(w),!0).forEach(function(d){r(c,d,w[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(w)):s(Object(w)).forEach(function(d){Object.defineProperty(c,d,Object.getOwnPropertyDescriptor(w,d))})}return c}function r(c,m,w){return m=g(m),m in c?Object.defineProperty(c,m,{value:w,enumerable:!0,configurable:!0,writable:!0}):c[m]=w,c}function n(c,m){if(!(c instanceof m))throw new TypeError("Cannot call a class as a function")}function p(c,m){for(var w=0;w<m.length;w++){var d=m[w];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,g(d.key),d)}}function f(c,m,w){return m&&p(c.prototype,m),Object.defineProperty(c,"prototype",{writable:!1}),c}function g(c){var m=a(c,"string");return typeof m=="symbol"?m:String(m)}function a(c,m){if(typeof c!="object"||c===null)return c;var w=c[Symbol.toPrimitive];if(w!==void 0){var d=w.call(c,m);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(c)}var _=De(),v=_.Buffer,x=Qe,E=x.inspect,R=E&&E.custom||"inspect";function A(c,m,w){v.prototype.copy.call(c,m,w)}return lt=(function(){function c(){n(this,c),this.head=null,this.tail=null,this.length=0}return f(c,[{key:"push",value:function(w){var d={data:w,next:null};this.length>0?this.tail.next=d:this.head=d,this.tail=d,++this.length}},{key:"unshift",value:function(w){var d={data:w,next:this.head};this.length===0&&(this.tail=d),this.head=d,++this.length}},{key:"shift",value:function(){if(this.length!==0){var w=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,w}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(w){if(this.length===0)return"";for(var d=this.head,b=""+d.data;d=d.next;)b+=w+d.data;return b}},{key:"concat",value:function(w){if(this.length===0)return v.alloc(0);for(var d=v.allocUnsafe(w>>>0),b=this.head,B=0;b;)A(b.data,d,B),B+=b.data.length,b=b.next;return d}},{key:"consume",value:function(w,d){var b;return w<this.head.data.length?(b=this.head.data.slice(0,w),this.head.data=this.head.data.slice(w)):w===this.head.data.length?b=this.shift():b=d?this._getString(w):this._getBuffer(w),b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(w){var d=this.head,b=1,B=d.data;for(w-=B.length;d=d.next;){var F=d.data,I=w>F.length?F.length:w;if(I===F.length?B+=F:B+=F.slice(0,w),w-=I,w===0){I===F.length?(++b,d.next?this.head=d.next:this.head=this.tail=null):(this.head=d,d.data=F.slice(I));break}++b}return this.length-=b,B}},{key:"_getBuffer",value:function(w){var d=v.allocUnsafe(w),b=this.head,B=1;for(b.data.copy(d),w-=b.data.length;b=b.next;){var F=b.data,I=w>F.length?F.length:w;if(F.copy(d,d.length-w,0,I),w-=I,w===0){I===F.length?(++B,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=F.slice(I));break}++B}return this.length-=B,d}},{key:R,value:function(w,d){return E(this,e(e({},d),{},{depth:0,customInspect:!1}))}}]),c})(),lt}var ft,ir;function qr(){if(ir)return ft;ir=1;function s(g,a){var _=this,v=this._readableState&&this._readableState.destroyed,x=this._writableState&&this._writableState.destroyed;return v||x?(a?a(g):g&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(p,this,g)):process.nextTick(p,this,g)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(g||null,function(E){!a&&E?_._writableState?_._writableState.errorEmitted?process.nextTick(r,_):(_._writableState.errorEmitted=!0,process.nextTick(e,_,E)):process.nextTick(e,_,E):a?(process.nextTick(r,_),a(E)):process.nextTick(r,_)}),this)}function e(g,a){p(g,a),r(g)}function r(g){g._writableState&&!g._writableState.emitClose||g._readableState&&!g._readableState.emitClose||g.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function p(g,a){g.emit("error",a)}function f(g,a){var _=g._readableState,v=g._writableState;_&&_.autoDestroy||v&&v.autoDestroy?g.destroy(a):g.emit("error",a)}return ft={destroy:s,undestroy:n,errorOrDestroy:f},ft}var dt={},nr;function Ne(){if(nr)return dt;nr=1;function s(a,_){a.prototype=Object.create(_.prototype),a.prototype.constructor=a,a.__proto__=_}var e={};function r(a,_,v){v||(v=Error);function x(R,A,c){return typeof _=="string"?_:_(R,A,c)}var E=(function(R){s(A,R);function A(c,m,w){return R.call(this,x(c,m,w))||this}return A})(v);E.prototype.name=v.name,E.prototype.code=a,e[a]=E}function n(a,_){if(Array.isArray(a)){var v=a.length;return a=a.map(function(x){return String(x)}),v>2?"one of ".concat(_," ").concat(a.slice(0,v-1).join(", "),", or ")+a[v-1]:v===2?"one of ".concat(_," ").concat(a[0]," or ").concat(a[1]):"of ".concat(_," ").concat(a[0])}else return"of ".concat(_," ").concat(String(a))}function p(a,_,v){return a.substr(0,_.length)===_}function f(a,_,v){return(v===void 0||v>a.length)&&(v=a.length),a.substring(v-_.length,v)===_}function g(a,_,v){return typeof v!="number"&&(v=0),v+_.length>a.length?!1:a.indexOf(_,v)!==-1}return r("ERR_INVALID_OPT_VALUE",function(a,_){return'The value "'+_+'" is invalid for option "'+a+'"'},TypeError),r("ERR_INVALID_ARG_TYPE",function(a,_,v){var x;typeof _=="string"&&p(_,"not ")?(x="must not be",_=_.replace(/^not /,"")):x="must be";var E;if(f(a," argument"))E="The ".concat(a," ").concat(x," ").concat(n(_,"type"));else{var R=g(a,".")?"property":"argument";E='The "'.concat(a,'" ').concat(R," ").concat(x," ").concat(n(_,"type"))}return E+=". Received type ".concat(typeof v),E},TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),dt.codes=e,dt}var pt,sr;function jr(){if(sr)return pt;sr=1;var s=Ne().codes.ERR_INVALID_OPT_VALUE;function e(n,p,f){return n.highWaterMark!=null?n.highWaterMark:p?n[f]:null}function r(n,p,f,g){var a=e(p,g,f);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var _=g?f:"highWaterMark";throw new s(_,a)}return Math.floor(a)}return n.objectMode?16:16*1024}return pt={getHighWaterMark:r},pt}var $e={exports:{}},or;function Pe(){return or||(or=1,typeof Object.create=="function"?$e.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:$e.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}),$e.exports}var gt,ar;function fn(){if(ar)return gt;ar=1,gt=s;function s(r,n){if(e("noDeprecation"))return r;var p=!1;function f(){if(!p){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),p=!0}return r.apply(this,arguments)}return f}function e(r){try{if(!globalThis.localStorage)return!1}catch{return!1}var n=globalThis.localStorage[r];return n==null?!1:String(n).toLowerCase()==="true"}return gt}var yt,cr;function Wr(){if(cr)return yt;cr=1,yt=D;function s(T){var C=this;this.next=null,this.entry=null,this.finish=function(){Se(C,T)}}var e;D.WritableState=L;var r={deprecate:fn()},n=Ur(),p=De().Buffer,f=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function g(T){return p.from(T)}function a(T){return p.isBuffer(T)||T instanceof f}var _=qr(),v=jr(),x=v.getHighWaterMark,E=Ne().codes,R=E.ERR_INVALID_ARG_TYPE,A=E.ERR_METHOD_NOT_IMPLEMENTED,c=E.ERR_MULTIPLE_CALLBACK,m=E.ERR_STREAM_CANNOT_PIPE,w=E.ERR_STREAM_DESTROYED,d=E.ERR_STREAM_NULL_VALUES,b=E.ERR_STREAM_WRITE_AFTER_END,B=E.ERR_UNKNOWN_ENCODING,F=_.errorOrDestroy;Pe()(D,n);function I(){}function L(T,C,O){e=e||Ae(),T=T||{},typeof O!="boolean"&&(O=C instanceof e),this.objectMode=!!T.objectMode,O&&(this.objectMode=this.objectMode||!!T.writableObjectMode),this.highWaterMark=x(this,T,"writableHighWaterMark",O),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var P=T.decodeStrings===!1;this.decodeStrings=!P,this.defaultEncoding=T.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(W){ke(C,W)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=T.emitClose!==!1,this.autoDestroy=!!T.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}L.prototype.getBuffer=function(){for(var C=this.bufferedRequest,O=[];C;)O.push(C),C=C.next;return O},(function(){try{Object.defineProperty(L.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var q;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(q=Function.prototype[Symbol.hasInstance],Object.defineProperty(D,Symbol.hasInstance,{value:function(C){return q.call(this,C)?!0:this!==D?!1:C&&C._writableState instanceof L}})):q=function(C){return C instanceof this};function D(T){e=e||Ae();var C=this instanceof e;if(!C&&!q.call(D,this))return new D(T);this._writableState=new L(T,this,C),this.writable=!0,T&&(typeof T.write=="function"&&(this._write=T.write),typeof T.writev=="function"&&(this._writev=T.writev),typeof T.destroy=="function"&&(this._destroy=T.destroy),typeof T.final=="function"&&(this._final=T.final)),n.call(this)}D.prototype.pipe=function(){F(this,new m)};function U(T,C){var O=new b;F(T,O),process.nextTick(C,O)}function K(T,C,O,P){var W;return O===null?W=new d:typeof O!="string"&&!C.objectMode&&(W=new R("chunk",["string","Buffer"],O)),W?(F(T,W),process.nextTick(P,W),!1):!0}D.prototype.write=function(T,C,O){var P=this._writableState,W=!1,h=!P.objectMode&&a(T);return h&&!p.isBuffer(T)&&(T=g(T)),typeof C=="function"&&(O=C,C=null),h?C="buffer":C||(C=P.defaultEncoding),typeof O!="function"&&(O=I),P.ending?U(this,O):(h||K(this,P,T,O))&&(P.pendingcb++,W=re(this,P,h,T,C,O)),W},D.prototype.cork=function(){this._writableState.corked++},D.prototype.uncork=function(){var T=this._writableState;T.corked&&(T.corked--,!T.writing&&!T.corked&&!T.bufferProcessing&&T.bufferedRequest&&ge(this,T))},D.prototype.setDefaultEncoding=function(C){if(typeof C=="string"&&(C=C.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((C+"").toLowerCase())>-1))throw new B(C);return this._writableState.defaultEncoding=C,this},Object.defineProperty(D.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function $(T,C,O){return!T.objectMode&&T.decodeStrings!==!1&&typeof C=="string"&&(C=p.from(C,O)),C}Object.defineProperty(D.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function re(T,C,O,P,W,h){if(!O){var l=$(C,P,W);P!==l&&(O=!0,W="buffer",P=l)}var k=C.objectMode?1:P.length;C.length+=k;var M=C.length<C.highWaterMark;if(M||(C.needDrain=!0),C.writing||C.corked){var X=C.lastBufferedRequest;C.lastBufferedRequest={chunk:P,encoding:W,isBuf:O,callback:h,next:null},X?X.next=C.lastBufferedRequest:C.bufferedRequest=C.lastBufferedRequest,C.bufferedRequestCount+=1}else J(T,C,!1,k,P,W,h);return M}function J(T,C,O,P,W,h,l){C.writelen=P,C.writecb=l,C.writing=!0,C.sync=!0,C.destroyed?C.onwrite(new w("write")):O?T._writev(W,C.onwrite):T._write(W,h,C.onwrite),C.sync=!1}function se(T,C,O,P,W){--C.pendingcb,O?(process.nextTick(W,P),process.nextTick(le,T,C),T._writableState.errorEmitted=!0,F(T,P)):(W(P),T._writableState.errorEmitted=!0,F(T,P),le(T,C))}function me(T){T.writing=!1,T.writecb=null,T.length-=T.writelen,T.writelen=0}function ke(T,C){var O=T._writableState,P=O.sync,W=O.writecb;if(typeof W!="function")throw new c;if(me(O),C)se(T,O,P,C,W);else{var h=Re(O)||T.destroyed;!h&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&ge(T,O),P?process.nextTick(pe,T,O,h,W):pe(T,O,h,W)}}function pe(T,C,O,P){O||ve(T,C),C.pendingcb--,P(),le(T,C)}function ve(T,C){C.length===0&&C.needDrain&&(C.needDrain=!1,T.emit("drain"))}function ge(T,C){C.bufferProcessing=!0;var O=C.bufferedRequest;if(T._writev&&O&&O.next){var P=C.bufferedRequestCount,W=new Array(P),h=C.corkedRequestsFree;h.entry=O;for(var l=0,k=!0;O;)W[l]=O,O.isBuf||(k=!1),O=O.next,l+=1;W.allBuffers=k,J(T,C,!0,C.length,W,"",h.finish),C.pendingcb++,C.lastBufferedRequest=null,h.next?(C.corkedRequestsFree=h.next,h.next=null):C.corkedRequestsFree=new s(C),C.bufferedRequestCount=0}else{for(;O;){var M=O.chunk,X=O.encoding,V=O.callback,G=C.objectMode?1:M.length;if(J(T,C,!1,G,M,X,V),O=O.next,C.bufferedRequestCount--,C.writing)break}O===null&&(C.lastBufferedRequest=null)}C.bufferedRequest=O,C.bufferProcessing=!1}D.prototype._write=function(T,C,O){O(new A("_write()"))},D.prototype._writev=null,D.prototype.end=function(T,C,O){var P=this._writableState;return typeof T=="function"?(O=T,T=null,C=null):typeof C=="function"&&(O=C,C=null),T!=null&&this.write(T,C),P.corked&&(P.corked=1,this.uncork()),P.ending||Ce(this,P,O),this},Object.defineProperty(D.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Re(T){return T.ending&&T.length===0&&T.bufferedRequest===null&&!T.finished&&!T.writing}function Z(T,C){T._final(function(O){C.pendingcb--,O&&F(T,O),C.prefinished=!0,T.emit("prefinish"),le(T,C)})}function ne(T,C){!C.prefinished&&!C.finalCalled&&(typeof T._final=="function"&&!C.destroyed?(C.pendingcb++,C.finalCalled=!0,process.nextTick(Z,T,C)):(C.prefinished=!0,T.emit("prefinish")))}function le(T,C){var O=Re(C);if(O&&(ne(T,C),C.pendingcb===0&&(C.finished=!0,T.emit("finish"),C.autoDestroy))){var P=T._readableState;(!P||P.autoDestroy&&P.endEmitted)&&T.destroy()}return O}function Ce(T,C,O){C.ending=!0,le(T,C),O&&(C.finished?process.nextTick(O):T.once("finish",O)),C.ended=!0,T.writable=!1}function Se(T,C,O){var P=T.entry;for(T.entry=null;P;){var W=P.callback;C.pendingcb--,W(O),P=P.next}C.corkedRequestsFree.next=T}return Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(C){this._writableState&&(this._writableState.destroyed=C)}}),D.prototype.destroy=_.destroy,D.prototype._undestroy=_.undestroy,D.prototype._destroy=function(T,C){C(T)},yt}var _t,ur;function Ae(){if(ur)return _t;ur=1;var s=Object.keys||function(v){var x=[];for(var E in v)x.push(E);return x};_t=g;var e=Vr(),r=Wr();Pe()(g,e);for(var n=s(r.prototype),p=0;p<n.length;p++){var f=n[p];g.prototype[f]||(g.prototype[f]=r.prototype[f])}function g(v){if(!(this instanceof g))return new g(v);e.call(this,v),r.call(this,v),this.allowHalfOpen=!0,v&&(v.readable===!1&&(this.readable=!1),v.writable===!1&&(this.writable=!1),v.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||process.nextTick(_,this)}function _(v){v.end()}return Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(x){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=x,this._writableState.destroyed=x)}}),_t}var mt={},hr;function lr(){if(hr)return mt;hr=1;var s=Pr().Buffer,e=s.isEncoding||function(d){switch(d=""+d,d&&d.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(d){if(!d)return"utf8";for(var b;;)switch(d){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return d;default:if(b)return;d=(""+d).toLowerCase(),b=!0}}function n(d){var b=r(d);if(typeof b!="string"&&(s.isEncoding===e||!e(d)))throw new Error("Unknown encoding: "+d);return b||d}mt.StringDecoder=p;function p(d){this.encoding=n(d);var b;switch(this.encoding){case"utf16le":this.text=E,this.end=R,b=4;break;case"utf8":this.fillLast=_,b=4;break;case"base64":this.text=A,this.end=c,b=3;break;default:this.write=m,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=s.allocUnsafe(b)}p.prototype.write=function(d){if(d.length===0)return"";var b,B;if(this.lastNeed){if(b=this.fillLast(d),b===void 0)return"";B=this.lastNeed,this.lastNeed=0}else B=0;return B<d.length?b?b+this.text(d,B):this.text(d,B):b||""},p.prototype.end=x,p.prototype.text=v,p.prototype.fillLast=function(d){if(this.lastNeed<=d.length)return d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,this.lastTotal-this.lastNeed,0,d.length),this.lastNeed-=d.length};function f(d){return d<=127?0:d>>5===6?2:d>>4===14?3:d>>3===30?4:d>>6===2?-1:-2}function g(d,b,B){var F=b.length-1;if(F<B)return 0;var I=f(b[F]);return I>=0?(I>0&&(d.lastNeed=I-1),I):--F<B||I===-2?0:(I=f(b[F]),I>=0?(I>0&&(d.lastNeed=I-2),I):--F<B||I===-2?0:(I=f(b[F]),I>=0?(I>0&&(I===2?I=0:d.lastNeed=I-3),I):0))}function a(d,b,B){if((b[0]&192)!==128)return d.lastNeed=0,"";if(d.lastNeed>1&&b.length>1){if((b[1]&192)!==128)return d.lastNeed=1,"";if(d.lastNeed>2&&b.length>2&&(b[2]&192)!==128)return d.lastNeed=2,""}}function _(d){var b=this.lastTotal-this.lastNeed,B=a(this,d);if(B!==void 0)return B;if(this.lastNeed<=d.length)return d.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);d.copy(this.lastChar,b,0,d.length),this.lastNeed-=d.length}function v(d,b){var B=g(this,d,b);if(!this.lastNeed)return d.toString("utf8",b);this.lastTotal=B;var F=d.length-(B-this.lastNeed);return d.copy(this.lastChar,0,F),d.toString("utf8",b,F)}function x(d){var b=d&&d.length?this.write(d):"";return this.lastNeed?b+"":b}function E(d,b){if((d.length-b)%2===0){var B=d.toString("utf16le",b);if(B){var F=B.charCodeAt(B.length-1);if(F>=55296&&F<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1],B.slice(0,-1)}return B}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=d[d.length-1],d.toString("utf16le",b,d.length-1)}function R(d){var b=d&&d.length?this.write(d):"";if(this.lastNeed){var B=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,B)}return b}function A(d,b){var B=(d.length-b)%3;return B===0?d.toString("base64",b):(this.lastNeed=3-B,this.lastTotal=3,B===1?this.lastChar[0]=d[d.length-1]:(this.lastChar[0]=d[d.length-2],this.lastChar[1]=d[d.length-1]),d.toString("base64",b,d.length-B))}function c(d){var b=d&&d.length?this.write(d):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function m(d){return d.toString(this.encoding)}function w(d){return d&&d.length?this.write(d):""}return mt}var wt,fr;function qt(){if(fr)return wt;fr=1;var s=Ne().codes.ERR_STREAM_PREMATURE_CLOSE;function e(f){var g=!1;return function(){if(!g){g=!0;for(var a=arguments.length,_=new Array(a),v=0;v<a;v++)_[v]=arguments[v];f.apply(this,_)}}}function r(){}function n(f){return f.setHeader&&typeof f.abort=="function"}function p(f,g,a){if(typeof g=="function")return p(f,null,g);g||(g={}),a=e(a||r);var _=g.readable||g.readable!==!1&&f.readable,v=g.writable||g.writable!==!1&&f.writable,x=function(){f.writable||R()},E=f._writableState&&f._writableState.finished,R=function(){v=!1,E=!0,_||a.call(f)},A=f._readableState&&f._readableState.endEmitted,c=function(){_=!1,A=!0,v||a.call(f)},m=function(B){a.call(f,B)},w=function(){var B;if(_&&!A)return(!f._readableState||!f._readableState.ended)&&(B=new s),a.call(f,B);if(v&&!E)return(!f._writableState||!f._writableState.ended)&&(B=new s),a.call(f,B)},d=function(){f.req.on("finish",R)};return n(f)?(f.on("complete",R),f.on("abort",w),f.req?d():f.on("request",d)):v&&!f._writableState&&(f.on("end",x),f.on("close",x)),f.on("end",c),f.on("finish",R),g.error!==!1&&f.on("error",m),f.on("close",w),function(){f.removeListener("complete",R),f.removeListener("abort",w),f.removeListener("request",d),f.req&&f.req.removeListener("finish",R),f.removeListener("end",x),f.removeListener("close",x),f.removeListener("finish",R),f.removeListener("end",c),f.removeListener("error",m),f.removeListener("close",w)}}return wt=p,wt}var bt,dr;function dn(){if(dr)return bt;dr=1;var s;function e(B,F,I){return F=r(F),F in B?Object.defineProperty(B,F,{value:I,enumerable:!0,configurable:!0,writable:!0}):B[F]=I,B}function r(B){var F=n(B,"string");return typeof F=="symbol"?F:String(F)}function n(B,F){if(typeof B!="object"||B===null)return B;var I=B[Symbol.toPrimitive];if(I!==void 0){var L=I.call(B,F);if(typeof L!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(B)}var p=qt(),f=Symbol("lastResolve"),g=Symbol("lastReject"),a=Symbol("error"),_=Symbol("ended"),v=Symbol("lastPromise"),x=Symbol("handlePromise"),E=Symbol("stream");function R(B,F){return{value:B,done:F}}function A(B){var F=B[f];if(F!==null){var I=B[E].read();I!==null&&(B[v]=null,B[f]=null,B[g]=null,F(R(I,!1)))}}function c(B){process.nextTick(A,B)}function m(B,F){return function(I,L){B.then(function(){if(F[_]){I(R(void 0,!0));return}F[x](I,L)},L)}}var w=Object.getPrototypeOf(function(){}),d=Object.setPrototypeOf((s={get stream(){return this[E]},next:function(){var F=this,I=this[a];if(I!==null)return Promise.reject(I);if(this[_])return Promise.resolve(R(void 0,!0));if(this[E].destroyed)return new Promise(function(U,K){process.nextTick(function(){F[a]?K(F[a]):U(R(void 0,!0))})});var L=this[v],q;if(L)q=new Promise(m(L,this));else{var D=this[E].read();if(D!==null)return Promise.resolve(R(D,!1));q=new Promise(this[x])}return this[v]=q,q}},e(s,Symbol.asyncIterator,function(){return this}),e(s,"return",function(){var F=this;return new Promise(function(I,L){F[E].destroy(null,function(q){if(q){L(q);return}I(R(void 0,!0))})})}),s),w),b=function(F){var I,L=Object.create(d,(I={},e(I,E,{value:F,writable:!0}),e(I,f,{value:null,writable:!0}),e(I,g,{value:null,writable:!0}),e(I,a,{value:null,writable:!0}),e(I,_,{value:F._readableState.endEmitted,writable:!0}),e(I,x,{value:function(D,U){var K=L[E].read();K?(L[v]=null,L[f]=null,L[g]=null,D(R(K,!1))):(L[f]=D,L[g]=U)},writable:!0}),I));return L[v]=null,p(F,function(q){if(q&&q.code!=="ERR_STREAM_PREMATURE_CLOSE"){var D=L[g];D!==null&&(L[v]=null,L[f]=null,L[g]=null,D(q)),L[a]=q;return}var U=L[f];U!==null&&(L[v]=null,L[f]=null,L[g]=null,U(R(void 0,!0))),L[_]=!0}),F.on("readable",c.bind(null,L)),L};return bt=b,bt}var Et,pr;function pn(){return pr||(pr=1,Et=function(){throw new Error("Readable.from is not available in the browser")}),Et}var vt,gr;function Vr(){if(gr)return vt;gr=1,vt=U;var s;U.ReadableState=D,Qe.EventEmitter;var e=function(l,k){return l.listeners(k).length},r=Ur(),n=De().Buffer,p=(typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(h){return n.from(h)}function g(h){return n.isBuffer(h)||h instanceof p}var a=Qe,_;a&&a.debuglog?_=a.debuglog("stream"):_=function(){};var v=ln(),x=qr(),E=jr(),R=E.getHighWaterMark,A=Ne().codes,c=A.ERR_INVALID_ARG_TYPE,m=A.ERR_STREAM_PUSH_AFTER_EOF,w=A.ERR_METHOD_NOT_IMPLEMENTED,d=A.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,b,B,F;Pe()(U,r);var I=x.errorOrDestroy,L=["error","close","destroy","pause","resume"];function q(h,l,k){if(typeof h.prependListener=="function")return h.prependListener(l,k);!h._events||!h._events[l]?h.on(l,k):Array.isArray(h._events[l])?h._events[l].unshift(k):h._events[l]=[k,h._events[l]]}function D(h,l,k){s=s||Ae(),h=h||{},typeof k!="boolean"&&(k=l instanceof s),this.objectMode=!!h.objectMode,k&&(this.objectMode=this.objectMode||!!h.readableObjectMode),this.highWaterMark=R(this,h,"readableHighWaterMark",k),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=h.emitClose!==!1,this.autoDestroy=!!h.autoDestroy,this.destroyed=!1,this.defaultEncoding=h.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,h.encoding&&(b||(b=lr().StringDecoder),this.decoder=new b(h.encoding),this.encoding=h.encoding)}function U(h){if(s=s||Ae(),!(this instanceof U))return new U(h);var l=this instanceof s;this._readableState=new D(h,this,l),this.readable=!0,h&&(typeof h.read=="function"&&(this._read=h.read),typeof h.destroy=="function"&&(this._destroy=h.destroy)),r.call(this)}Object.defineProperty(U.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(l){this._readableState&&(this._readableState.destroyed=l)}}),U.prototype.destroy=x.destroy,U.prototype._undestroy=x.undestroy,U.prototype._destroy=function(h,l){l(h)},U.prototype.push=function(h,l){var k=this._readableState,M;return k.objectMode?M=!0:typeof h=="string"&&(l=l||k.defaultEncoding,l!==k.encoding&&(h=n.from(h,l),l=""),M=!0),K(this,h,l,!1,M)},U.prototype.unshift=function(h){return K(this,h,null,!0,!1)};function K(h,l,k,M,X){_("readableAddChunk",l);var V=h._readableState;if(l===null)V.reading=!1,ke(h,V);else{var G;if(X||(G=re(V,l)),G)I(h,G);else if(V.objectMode||l&&l.length>0)if(typeof l!="string"&&!V.objectMode&&Object.getPrototypeOf(l)!==n.prototype&&(l=f(l)),M)V.endEmitted?I(h,new d):$(h,V,l,!0);else if(V.ended)I(h,new m);else{if(V.destroyed)return!1;V.reading=!1,V.decoder&&!k?(l=V.decoder.write(l),V.objectMode||l.length!==0?$(h,V,l,!1):ge(h,V)):$(h,V,l,!1)}else M||(V.reading=!1,ge(h,V))}return!V.ended&&(V.length<V.highWaterMark||V.length===0)}function $(h,l,k,M){l.flowing&&l.length===0&&!l.sync?(l.awaitDrain=0,h.emit("data",k)):(l.length+=l.objectMode?1:k.length,M?l.buffer.unshift(k):l.buffer.push(k),l.needReadable&&pe(h)),ge(h,l)}function re(h,l){var k;return!g(l)&&typeof l!="string"&&l!==void 0&&!h.objectMode&&(k=new c("chunk",["string","Buffer","Uint8Array"],l)),k}U.prototype.isPaused=function(){return this._readableState.flowing===!1},U.prototype.setEncoding=function(h){b||(b=lr().StringDecoder);var l=new b(h);this._readableState.decoder=l,this._readableState.encoding=this._readableState.decoder.encoding;for(var k=this._readableState.buffer.head,M="";k!==null;)M+=l.write(k.data),k=k.next;return this._readableState.buffer.clear(),M!==""&&this._readableState.buffer.push(M),this._readableState.length=M.length,this};var J=1073741824;function se(h){return h>=J?h=J:(h--,h|=h>>>1,h|=h>>>2,h|=h>>>4,h|=h>>>8,h|=h>>>16,h++),h}function me(h,l){return h<=0||l.length===0&&l.ended?0:l.objectMode?1:h!==h?l.flowing&&l.length?l.buffer.head.data.length:l.length:(h>l.highWaterMark&&(l.highWaterMark=se(h)),h<=l.length?h:l.ended?l.length:(l.needReadable=!0,0))}U.prototype.read=function(h){_("read",h),h=parseInt(h,10);var l=this._readableState,k=h;if(h!==0&&(l.emittedReadable=!1),h===0&&l.needReadable&&((l.highWaterMark!==0?l.length>=l.highWaterMark:l.length>0)||l.ended))return _("read: emitReadable",l.length,l.ended),l.length===0&&l.ended?O(this):pe(this),null;if(h=me(h,l),h===0&&l.ended)return l.length===0&&O(this),null;var M=l.needReadable;_("need readable",M),(l.length===0||l.length-h<l.highWaterMark)&&(M=!0,_("length less than watermark",M)),l.ended||l.reading?(M=!1,_("reading or ended",M)):M&&(_("do read"),l.reading=!0,l.sync=!0,l.length===0&&(l.needReadable=!0),this._read(l.highWaterMark),l.sync=!1,l.reading||(h=me(k,l)));var X;return h>0?X=C(h,l):X=null,X===null?(l.needReadable=l.length<=l.highWaterMark,h=0):(l.length-=h,l.awaitDrain=0),l.length===0&&(l.ended||(l.needReadable=!0),k!==h&&l.ended&&O(this)),X!==null&&this.emit("data",X),X};function ke(h,l){if(_("onEofChunk"),!l.ended){if(l.decoder){var k=l.decoder.end();k&&k.length&&(l.buffer.push(k),l.length+=l.objectMode?1:k.length)}l.ended=!0,l.sync?pe(h):(l.needReadable=!1,l.emittedReadable||(l.emittedReadable=!0,ve(h)))}}function pe(h){var l=h._readableState;_("emitReadable",l.needReadable,l.emittedReadable),l.needReadable=!1,l.emittedReadable||(_("emitReadable",l.flowing),l.emittedReadable=!0,process.nextTick(ve,h))}function ve(h){var l=h._readableState;_("emitReadable_",l.destroyed,l.length,l.ended),!l.destroyed&&(l.length||l.ended)&&(h.emit("readable"),l.emittedReadable=!1),l.needReadable=!l.flowing&&!l.ended&&l.length<=l.highWaterMark,T(h)}function ge(h,l){l.readingMore||(l.readingMore=!0,process.nextTick(Re,h,l))}function Re(h,l){for(;!l.reading&&!l.ended&&(l.length<l.highWaterMark||l.flowing&&l.length===0);){var k=l.length;if(_("maybeReadMore read 0"),h.read(0),k===l.length)break}l.readingMore=!1}U.prototype._read=function(h){I(this,new w("_read()"))},U.prototype.pipe=function(h,l){var k=this,M=this._readableState;switch(M.pipesCount){case 0:M.pipes=h;break;case 1:M.pipes=[M.pipes,h];break;default:M.pipes.push(h);break}M.pipesCount+=1,_("pipe count=%d opts=%j",M.pipesCount,l);var X=(!l||l.end!==!1)&&h!==process.stdout&&h!==process.stderr,V=X?ye:be;M.endEmitted?process.nextTick(V):k.once("end",V),h.on("unpipe",G);function G(o,t){_("onunpipe"),o===k&&t&&t.hasUnpiped===!1&&(t.hasUnpiped=!0,xe())}function ye(){_("onend"),h.end()}var Te=Z(k);h.on("drain",Te);var Ie=!1;function xe(){_("cleanup"),h.removeListener("close",Oe),h.removeListener("finish",ae),h.removeListener("drain",Te),h.removeListener("error",we),h.removeListener("unpipe",G),k.removeListener("end",ye),k.removeListener("end",be),k.removeListener("data",oe),Ie=!0,M.awaitDrain&&(!h._writableState||h._writableState.needDrain)&&Te()}k.on("data",oe);function oe(o){_("ondata");var t=h.write(o);_("dest.write",t),t===!1&&((M.pipesCount===1&&M.pipes===h||M.pipesCount>1&&W(M.pipes,h)!==-1)&&!Ie&&(_("false write response, pause",M.awaitDrain),M.awaitDrain++),k.pause())}function we(o){_("onerror",o),be(),h.removeListener("error",we),e(h,"error")===0&&I(h,o)}q(h,"error",we);function Oe(){h.removeListener("finish",ae),be()}h.once("close",Oe);function ae(){_("onfinish"),h.removeListener("close",Oe),be()}h.once("finish",ae);function be(){_("unpipe"),k.unpipe(h)}return h.emit("pipe",k),M.flowing||(_("pipe resume"),k.resume()),h};function Z(h){return function(){var k=h._readableState;_("pipeOnDrain",k.awaitDrain),k.awaitDrain&&k.awaitDrain--,k.awaitDrain===0&&e(h,"data")&&(k.flowing=!0,T(h))}}U.prototype.unpipe=function(h){var l=this._readableState,k={hasUnpiped:!1};if(l.pipesCount===0)return this;if(l.pipesCount===1)return h&&h!==l.pipes?this:(h||(h=l.pipes),l.pipes=null,l.pipesCount=0,l.flowing=!1,h&&h.emit("unpipe",this,k),this);if(!h){var M=l.pipes,X=l.pipesCount;l.pipes=null,l.pipesCount=0,l.flowing=!1;for(var V=0;V<X;V++)M[V].emit("unpipe",this,{hasUnpiped:!1});return this}var G=W(l.pipes,h);return G===-1?this:(l.pipes.splice(G,1),l.pipesCount-=1,l.pipesCount===1&&(l.pipes=l.pipes[0]),h.emit("unpipe",this,k),this)},U.prototype.on=function(h,l){var k=r.prototype.on.call(this,h,l),M=this._readableState;return h==="data"?(M.readableListening=this.listenerCount("readable")>0,M.flowing!==!1&&this.resume()):h==="readable"&&!M.endEmitted&&!M.readableListening&&(M.readableListening=M.needReadable=!0,M.flowing=!1,M.emittedReadable=!1,_("on readable",M.length,M.reading),M.length?pe(this):M.reading||process.nextTick(le,this)),k},U.prototype.addListener=U.prototype.on,U.prototype.removeListener=function(h,l){var k=r.prototype.removeListener.call(this,h,l);return h==="readable"&&process.nextTick(ne,this),k},U.prototype.removeAllListeners=function(h){var l=r.prototype.removeAllListeners.apply(this,arguments);return(h==="readable"||h===void 0)&&process.nextTick(ne,this),l};function ne(h){var l=h._readableState;l.readableListening=h.listenerCount("readable")>0,l.resumeScheduled&&!l.paused?l.flowing=!0:h.listenerCount("data")>0&&h.resume()}function le(h){_("readable nexttick read 0"),h.read(0)}U.prototype.resume=function(){var h=this._readableState;return h.flowing||(_("resume"),h.flowing=!h.readableListening,Ce(this,h)),h.paused=!1,this};function Ce(h,l){l.resumeScheduled||(l.resumeScheduled=!0,process.nextTick(Se,h,l))}function Se(h,l){_("resume",l.reading),l.reading||h.read(0),l.resumeScheduled=!1,h.emit("resume"),T(h),l.flowing&&!l.reading&&h.read(0)}U.prototype.pause=function(){return _("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(_("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function T(h){var l=h._readableState;for(_("flow",l.flowing);l.flowing&&h.read()!==null;);}U.prototype.wrap=function(h){var l=this,k=this._readableState,M=!1;h.on("end",function(){if(_("wrapped end"),k.decoder&&!k.ended){var G=k.decoder.end();G&&G.length&&l.push(G)}l.push(null)}),h.on("data",function(G){if(_("wrapped data"),k.decoder&&(G=k.decoder.write(G)),!(k.objectMode&&G==null)&&!(!k.objectMode&&(!G||!G.length))){var ye=l.push(G);ye||(M=!0,h.pause())}});for(var X in h)this[X]===void 0&&typeof h[X]=="function"&&(this[X]=(function(ye){return function(){return h[ye].apply(h,arguments)}})(X));for(var V=0;V<L.length;V++)h.on(L[V],this.emit.bind(this,L[V]));return this._read=function(G){_("wrapped _read",G),M&&(M=!1,h.resume())},this},typeof Symbol=="function"&&(U.prototype[Symbol.asyncIterator]=function(){return B===void 0&&(B=dn()),B(this)}),Object.defineProperty(U.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(U.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(U.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(l){this._readableState&&(this._readableState.flowing=l)}}),U._fromList=C,Object.defineProperty(U.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function C(h,l){if(l.length===0)return null;var k;return l.objectMode?k=l.buffer.shift():!h||h>=l.length?(l.decoder?k=l.buffer.join(""):l.buffer.length===1?k=l.buffer.first():k=l.buffer.concat(l.length),l.buffer.clear()):k=l.buffer.consume(h,l.decoder),k}function O(h){var l=h._readableState;_("endReadable",l.endEmitted),l.endEmitted||(l.ended=!0,process.nextTick(P,l,h))}function P(h,l){if(_("endReadableNT",h.endEmitted,h.length),!h.endEmitted&&h.length===0&&(h.endEmitted=!0,l.readable=!1,l.emit("end"),h.autoDestroy)){var k=l._writableState;(!k||k.autoDestroy&&k.finished)&&l.destroy()}}typeof Symbol=="function"&&(U.from=function(h,l){return F===void 0&&(F=pn()),F(U,h,l)});function W(h,l){for(var k=0,M=h.length;k<M;k++)if(h[k]===l)return k;return-1}return vt}var Rt,yr;function Hr(){if(yr)return Rt;yr=1,Rt=a;var s=Ne().codes,e=s.ERR_METHOD_NOT_IMPLEMENTED,r=s.ERR_MULTIPLE_CALLBACK,n=s.ERR_TRANSFORM_ALREADY_TRANSFORMING,p=s.ERR_TRANSFORM_WITH_LENGTH_0,f=Ae();Pe()(a,f);function g(x,E){var R=this._transformState;R.transforming=!1;var A=R.writecb;if(A===null)return this.emit("error",new r);R.writechunk=null,R.writecb=null,E!=null&&this.push(E),A(x);var c=this._readableState;c.reading=!1,(c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}function a(x){if(!(this instanceof a))return new a(x);f.call(this,x),this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,x&&(typeof x.transform=="function"&&(this._transform=x.transform),typeof x.flush=="function"&&(this._flush=x.flush)),this.on("prefinish",_)}function _(){var x=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(E,R){v(x,E,R)}):v(this,null,null)}a.prototype.push=function(x,E){return this._transformState.needTransform=!1,f.prototype.push.call(this,x,E)},a.prototype._transform=function(x,E,R){R(new e("_transform()"))},a.prototype._write=function(x,E,R){var A=this._transformState;if(A.writecb=R,A.writechunk=x,A.writeencoding=E,!A.transforming){var c=this._readableState;(A.needTransform||c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}},a.prototype._read=function(x){var E=this._transformState;E.writechunk!==null&&!E.transforming?(E.transforming=!0,this._transform(E.writechunk,E.writeencoding,E.afterTransform)):E.needTransform=!0},a.prototype._destroy=function(x,E){f.prototype._destroy.call(this,x,function(R){E(R)})};function v(x,E,R){if(E)return x.emit("error",E);if(R!=null&&x.push(R),x._writableState.length)throw new p;if(x._transformState.transforming)throw new n;return x.push(null)}return Rt}var Ct,_r;function gn(){if(_r)return Ct;_r=1,Ct=e;var s=Hr();Pe()(e,s);function e(r){if(!(this instanceof e))return new e(r);s.call(this,r)}return e.prototype._transform=function(r,n,p){p(null,r)},Ct}var St,mr;function yn(){if(mr)return St;mr=1;var s;function e(R){var A=!1;return function(){A||(A=!0,R.apply(void 0,arguments))}}var r=Ne().codes,n=r.ERR_MISSING_ARGS,p=r.ERR_STREAM_DESTROYED;function f(R){if(R)throw R}function g(R){return R.setHeader&&typeof R.abort=="function"}function a(R,A,c,m){m=e(m);var w=!1;R.on("close",function(){w=!0}),s===void 0&&(s=qt()),s(R,{readable:A,writable:c},function(b){if(b)return m(b);w=!0,m()});var d=!1;return function(b){if(!w&&!d){if(d=!0,g(R))return R.abort();if(typeof R.destroy=="function")return R.destroy();m(b||new p("pipe"))}}}function _(R){R()}function v(R,A){return R.pipe(A)}function x(R){return!R.length||typeof R[R.length-1]!="function"?f:R.pop()}function E(){for(var R=arguments.length,A=new Array(R),c=0;c<R;c++)A[c]=arguments[c];var m=x(A);if(Array.isArray(A[0])&&(A=A[0]),A.length<2)throw new n("streams");var w,d=A.map(function(b,B){var F=B<A.length-1,I=B>0;return a(b,F,I,function(L){w||(w=L),L&&d.forEach(_),!F&&(d.forEach(_),m(w))})});return A.reduce(v)}return St=E,St}var wr;function _n(){return wr||(wr=1,(function(s,e){e=s.exports=Vr(),e.Stream=e,e.Readable=e,e.Writable=Wr(),e.Duplex=Ae(),e.Transform=Hr(),e.PassThrough=gn(),e.finished=qt(),e.pipeline=yn()})(Ye,Ye.exports)),Ye.exports}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Tt,br;function mn(){if(br)return Tt;br=1;let s;return Tt=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):e=>(s||(s=Promise.resolve())).then(e).catch(r=>setTimeout(()=>{throw r},0)),Tt}var xt,Er;function wn(){if(Er)return xt;Er=1;function s(r,n){for(const p in n)Object.defineProperty(r,p,{value:n[p],enumerable:!0,configurable:!0});return r}function e(r,n,p){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");p||(p={}),typeof n=="object"&&(p=n,n=""),n&&(p.code=n);try{return s(r,p)}catch{p.message=r.message,p.stack=r.stack;const g=function(){};return g.prototype=Object.create(Object.getPrototypeOf(r)),s(new g,p)}}return xt=e,xt}/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var At,vr;function bn(){if(vr)return At;vr=1;const s=nn()("simple-peer"),e=sn(),r=cn(),n=_n(),p=mn(),f=wn(),{Buffer:g}=De(),a=64*1024,_=5*1e3,v=5*1e3;function x(A){return A.replace(/a=ice-options:trickle\s\n/g,"")}function E(A){console.warn(A)}class R extends n.Duplex{constructor(c){if(c=Object.assign({allowHalfOpen:!1},c),super(c),this._id=r(4).toString("hex").slice(0,7),this._debug("new peer %o",c),this.channelName=c.initiator?c.channelName||r(20).toString("hex"):null,this.initiator=c.initiator||!1,this.channelConfig=c.channelConfig||R.channelConfig,this.channelNegotiated=this.channelConfig.negotiated,this.config=Object.assign({},R.config,c.config),this.offerOptions=c.offerOptions||{},this.answerOptions=c.answerOptions||{},this.sdpTransform=c.sdpTransform||(m=>m),this.streams=c.streams||(c.stream?[c.stream]:[]),this.trickle=c.trickle!==void 0?c.trickle:!0,this.allowHalfTrickle=c.allowHalfTrickle!==void 0?c.allowHalfTrickle:!1,this.iceCompleteTimeout=c.iceCompleteTimeout||_,this.destroyed=!1,this.destroying=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=c.wrtc&&typeof c.wrtc=="object"?c.wrtc:e(),!this._wrtc)throw f(typeof window>"u"?new Error("No WebRTC support: Specify `opts.wrtc` option in this environment"):new Error("No WebRTC support: Not a supported browser"),"ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!1,this._firstNegotiation=!0,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(m){this.destroy(f(m,"ERR_PC_CONSTRUCTOR"));return}this._isReactNativeWebrtc=typeof this._pc._peerConnectionId=="number",this._pc.oniceconnectionstatechange=()=>{this._onIceStateChange()},this._pc.onicegatheringstatechange=()=>{this._onIceStateChange()},this._pc.onconnectionstatechange=()=>{this._onConnectionStateChange()},this._pc.onsignalingstatechange=()=>{this._onSignalingStateChange()},this._pc.onicecandidate=m=>{this._onIceCandidate(m)},typeof this._pc.peerIdentity=="object"&&this._pc.peerIdentity.catch(m=>{this.destroy(f(m,"ERR_PC_PEER_IDENTITY"))}),this.initiator||this.channelNegotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=m=>{this._setupData(m)},this.streams&&this.streams.forEach(m=>{this.addStream(m)}),this._pc.ontrack=m=>{this._onTrack(m)},this._debug("initial negotiation"),this._needsNegotiation(),this._onFinishBound=()=>{this._onFinish()},this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&this._channel.readyState==="open"}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(c){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot signal after peer is destroyed"),"ERR_DESTROYED");if(typeof c=="string")try{c=JSON.parse(c)}catch{c={}}this._debug("signal()"),c.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),c.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(c.transceiverRequest.kind,c.transceiverRequest.init)),c.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(c.candidate):this._pendingCandidates.push(c.candidate)),c.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(c)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(m=>{this._addIceCandidate(m)}),this._pendingCandidates=[],this._pc.remoteDescription.type==="offer"&&this._createAnswer())}).catch(m=>{this.destroy(f(m,"ERR_SET_REMOTE_DESCRIPTION"))}),!c.sdp&&!c.candidate&&!c.renegotiate&&!c.transceiverRequest&&this.destroy(f(new Error("signal() called with invalid signal data"),"ERR_SIGNALING"))}}_addIceCandidate(c){const m=new this._wrtc.RTCIceCandidate(c);this._pc.addIceCandidate(m).catch(w=>{!m.address||m.address.endsWith(".local")?E("Ignoring unsupported ICE candidate."):this.destroy(f(w,"ERR_ADD_ICE_CANDIDATE"))})}send(c){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot send after peer is destroyed"),"ERR_DESTROYED");this._channel.send(c)}}addTransceiver(c,m){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot addTransceiver after peer is destroyed"),"ERR_DESTROYED");if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(c,m),this._needsNegotiation()}catch(w){this.destroy(f(w,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{type:"transceiverRequest",transceiverRequest:{kind:c,init:m}})}}addStream(c){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot addStream after peer is destroyed"),"ERR_DESTROYED");this._debug("addStream()"),c.getTracks().forEach(m=>{this.addTrack(m,c)})}}addTrack(c,m){if(this.destroying)return;if(this.destroyed)throw f(new Error("cannot addTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("addTrack()");const w=this._senderMap.get(c)||new Map;let d=w.get(m);if(!d)d=this._pc.addTrack(c,m),w.set(m,d),this._senderMap.set(c,w),this._needsNegotiation();else throw d.removed?f(new Error("Track has been removed. You should enable/disable tracks that you want to re-add."),"ERR_SENDER_REMOVED"):f(new Error("Track has already been added to that stream."),"ERR_SENDER_ALREADY_ADDED")}replaceTrack(c,m,w){if(this.destroying)return;if(this.destroyed)throw f(new Error("cannot replaceTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("replaceTrack()");const d=this._senderMap.get(c),b=d?d.get(w):null;if(!b)throw f(new Error("Cannot replace track that was never added."),"ERR_TRACK_NOT_ADDED");m&&this._senderMap.set(m,d),b.replaceTrack!=null?b.replaceTrack(m):this.destroy(f(new Error("replaceTrack is not supported in this browser"),"ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(c,m){if(this.destroying)return;if(this.destroyed)throw f(new Error("cannot removeTrack after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSender()");const w=this._senderMap.get(c),d=w?w.get(m):null;if(!d)throw f(new Error("Cannot remove track that was never added."),"ERR_TRACK_NOT_ADDED");try{d.removed=!0,this._pc.removeTrack(d)}catch(b){b.name==="NS_ERROR_UNEXPECTED"?this._sendersAwaitingStable.push(d):this.destroy(f(b,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(c){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot removeStream after peer is destroyed"),"ERR_DESTROYED");this._debug("removeSenders()"),c.getTracks().forEach(m=>{this.removeTrack(m,c)})}}_needsNegotiation(){this._debug("_needsNegotiation"),!this._batchedNegotiation&&(this._batchedNegotiation=!0,p(()=>{this._batchedNegotiation=!1,this.initiator||!this._firstNegotiation?(this._debug("starting batched negotiation"),this.negotiate()):this._debug("non-initiator initial negotiation request discarded"),this._firstNegotiation=!1}))}negotiate(){if(!this.destroying){if(this.destroyed)throw f(new Error("cannot negotiate after peer is destroyed"),"ERR_DESTROYED");this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{type:"renegotiate",renegotiate:!0})),this._isNegotiating=!0}}destroy(c){this._destroy(c,()=>{})}_destroy(c,m){this.destroyed||this.destroying||(this.destroying=!0,this._debug("destroying (error: %s)",c&&(c.message||c)),p(()=>{if(this.destroyed=!0,this.destroying=!1,this._debug("destroy (error: %s)",c&&(c.message||c)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch{}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch{}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,c&&this.emit("error",c),this.emit("close"),m()}))}_setupData(c){if(!c.channel)return this.destroy(f(new Error("Data channel event is missing `channel` property"),"ERR_DATA_CHANNEL"));this._channel=c.channel,this._channel.binaryType="arraybuffer",typeof this._channel.bufferedAmountLowThreshold=="number"&&(this._channel.bufferedAmountLowThreshold=a),this.channelName=this._channel.label,this._channel.onmessage=w=>{this._onChannelMessage(w)},this._channel.onbufferedamountlow=()=>{this._onChannelBufferedAmountLow()},this._channel.onopen=()=>{this._onChannelOpen()},this._channel.onclose=()=>{this._onChannelClose()},this._channel.onerror=w=>{const d=w.error instanceof Error?w.error:new Error(`Datachannel error: ${w.message} ${w.filename}:${w.lineno}:${w.colno}`);this.destroy(f(d,"ERR_DATA_CHANNEL"))};let m=!1;this._closingInterval=setInterval(()=>{this._channel&&this._channel.readyState==="closing"?(m&&this._onChannelClose(),m=!0):m=!1},v)}_read(){}_write(c,m,w){if(this.destroyed)return w(f(new Error("cannot write after peer is destroyed"),"ERR_DATA_CHANNEL"));if(this._connected){try{this.send(c)}catch(d){return this.destroy(f(d,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>a?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=w):w(null)}else this._debug("write before connect"),this._chunk=c,this._cb=w}_onFinish(){if(this.destroyed)return;const c=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?c():this.once("connect",c)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(c=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(c.sdp=x(c.sdp)),c.sdp=this.sdpTransform(c.sdp);const m=()=>{if(this.destroyed)return;const b=this._pc.localDescription||c;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp})},w=()=>{this._debug("createOffer success"),!this.destroyed&&(this.trickle||this._iceComplete?m():this.once("_iceComplete",m))},d=b=>{this.destroy(f(b,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(c).then(w).catch(d)}).catch(c=>{this.destroy(f(c,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(c=>{!c.mid&&c.sender.track&&!c.requested&&(c.requested=!0,this.addTransceiver(c.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(c=>{if(this.destroyed)return;!this.trickle&&!this.allowHalfTrickle&&(c.sdp=x(c.sdp)),c.sdp=this.sdpTransform(c.sdp);const m=()=>{if(this.destroyed)return;const b=this._pc.localDescription||c;this._debug("signal"),this.emit("signal",{type:b.type,sdp:b.sdp}),this.initiator||this._requestMissingTransceivers()},w=()=>{this.destroyed||(this.trickle||this._iceComplete?m():this.once("_iceComplete",m))},d=b=>{this.destroy(f(b,"ERR_SET_LOCAL_DESCRIPTION"))};this._pc.setLocalDescription(c).then(w).catch(d)}).catch(c=>{this.destroy(f(c,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||this._pc.connectionState==="failed"&&this.destroy(f(new Error("Connection failed."),"ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(this.destroyed)return;const c=this._pc.iceConnectionState,m=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",c,m),this.emit("iceStateChange",c,m),(c==="connected"||c==="completed")&&(this._pcReady=!0,this._maybeReady()),c==="failed"&&this.destroy(f(new Error("Ice connection failed."),"ERR_ICE_CONNECTION_FAILURE")),c==="closed"&&this.destroy(f(new Error("Ice connection closed."),"ERR_ICE_CONNECTION_CLOSED"))}getStats(c){const m=w=>(Object.prototype.toString.call(w.values)==="[object Array]"&&w.values.forEach(d=>{Object.assign(w,d)}),w);this._pc.getStats.length===0||this._isReactNativeWebrtc?this._pc.getStats().then(w=>{const d=[];w.forEach(b=>{d.push(m(b))}),c(null,d)},w=>c(w)):this._pc.getStats.length>0?this._pc.getStats(w=>{if(this.destroyed)return;const d=[];w.result().forEach(b=>{const B={};b.names().forEach(F=>{B[F]=b.stat(F)}),B.id=b.id,B.type=b.type,B.timestamp=b.timestamp,d.push(m(B))}),c(null,d)},w=>c(w)):c(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const c=()=>{this.destroyed||this.getStats((m,w)=>{if(this.destroyed)return;m&&(w=[]);const d={},b={},B={};let F=!1;w.forEach(L=>{(L.type==="remotecandidate"||L.type==="remote-candidate")&&(d[L.id]=L),(L.type==="localcandidate"||L.type==="local-candidate")&&(b[L.id]=L),(L.type==="candidatepair"||L.type==="candidate-pair")&&(B[L.id]=L)});const I=L=>{F=!0;let q=b[L.localCandidateId];q&&(q.ip||q.address)?(this.localAddress=q.ip||q.address,this.localPort=Number(q.port)):q&&q.ipAddress?(this.localAddress=q.ipAddress,this.localPort=Number(q.portNumber)):typeof L.googLocalAddress=="string"&&(q=L.googLocalAddress.split(":"),this.localAddress=q[0],this.localPort=Number(q[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");let D=d[L.remoteCandidateId];D&&(D.ip||D.address)?(this.remoteAddress=D.ip||D.address,this.remotePort=Number(D.port)):D&&D.ipAddress?(this.remoteAddress=D.ipAddress,this.remotePort=Number(D.portNumber)):typeof L.googRemoteAddress=="string"&&(D=L.googRemoteAddress.split(":"),this.remoteAddress=D[0],this.remotePort=Number(D[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(w.forEach(L=>{L.type==="transport"&&L.selectedCandidatePairId&&I(B[L.selectedCandidatePairId]),(L.type==="googCandidatePair"&&L.googActiveConnection==="true"||(L.type==="candidatepair"||L.type==="candidate-pair")&&L.selected)&&I(L)}),!F&&(!Object.keys(B).length||Object.keys(b).length)){setTimeout(c,100);return}else this._connecting=!1,this._connected=!0;if(this._chunk){try{this.send(this._chunk)}catch(q){return this.destroy(f(q,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');const L=this._cb;this._cb=null,L(null)}typeof this._channel.bufferedAmountLowThreshold!="number"&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")})};c()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>a||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||(this._pc.signalingState==="stable"&&(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(c=>{this._pc.removeTrack(c),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation?(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()):(this._debug("negotiated"),this.emit("negotiated"))),this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(c){this.destroyed||(c.candidate&&this.trickle?this.emit("signal",{type:"candidate",candidate:{candidate:c.candidate.candidate,sdpMLineIndex:c.candidate.sdpMLineIndex,sdpMid:c.candidate.sdpMid}}):!c.candidate&&!this._iceComplete&&(this._iceComplete=!0,this.emit("_iceComplete")),c.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(c){if(this.destroyed)return;let m=c.data;m instanceof ArrayBuffer&&(m=g.from(m)),this.push(m)}_onChannelBufferedAmountLow(){if(this.destroyed||!this._cb)return;this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);const c=this._cb;this._cb=null,c(null)}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(c){this.destroyed||c.streams.forEach(m=>{this._debug("on track"),this.emit("track",c.track,m),this._remoteTracks.push({track:c.track,stream:m}),!this._remoteStreams.some(w=>w.id===m.id)&&(this._remoteStreams.push(m),p(()=>{this._debug("on stream"),this.emit("stream",m)}))})}_debug(){const c=[].slice.call(arguments);c[0]="["+this._id+"] "+c[0],s.apply(null,c)}}return R.WEBRTC_SUPPORT=!!e(),R.config={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478"]}],sdpSemantics:"unified-plan"},R.channelConfig={},At=R,At}var En=bn();const Rr=$r(En),xn=()=>{var D,U;const{meetingCode:s}=Kr(),{user:e}=Gr(),r=zr(),[n,p]=ce.useState(!0),[f,g]=ce.useState(!0),[a,_]=ce.useState([]),[v,x]=ce.useState(null),[E,R]=ce.useState(!1),A=ce.useRef(),c=ce.useRef(null),m=ce.useRef([]),w=ce.useRef();ce.useEffect(()=>(d(),A.current=Je("http://localhost:5000"),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(K=>{w.current=K,c.current&&(c.current.srcObject=K),A.current.emit("join-meeting",{meetingCode:s,userId:e==null?void 0:e.id,userName:`${e==null?void 0:e.firstName} ${e==null?void 0:e.lastName}`}),A.current.on("all-users",$=>{const re=[];$.forEach(J=>{const se=b(J,A.current.id,K);m.current.push({peerID:J,peer:se}),re.push({peerID:J,peer:se})}),_(re)}),A.current.on("user-joined",$=>{const re=B($.signal,$.callerID,K);m.current.push({peerID:$.callerID,peer:re}),_(J=>[...J,{peerID:$.callerID,peer:re}])}),A.current.on("receiving-returned-signal",$=>{m.current.find(J=>J.peerID===$.id).peer.signal($.signal)}),A.current.on("user-left",$=>{const re=m.current.find(se=>se.peerID===$);re&&re.peer.destroy();const J=m.current.filter(se=>se.peerID!==$);m.current=J,_(J)})}).catch(K=>{console.error("Failed to get media devices:",K),tt.error("Could not access camera/microphone")}),()=>{var K,$;(K=w.current)==null||K.getTracks().forEach(re=>re.stop()),v&&rt.post(`/video-meetings/${v.id}/leave`).catch(console.error),($=A.current)==null||$.disconnect()}),[s,v==null?void 0:v.id]);const d=async()=>{try{const $=(await rt.get(`/video-meetings/code/${s}`)).data.data.meeting;x($),await rt.post(`/video-meetings/${$.id}/join`)}catch{tt.error("Meeting not found or expired"),r("/lecturer/dashboard")}};function b(K,$,re){const J=new Rr({initiator:!0,trickle:!1,stream:re});return J.on("signal",se=>{A.current.emit("sending-signal",{userToSignal:K,callerID:$,signal:se})}),J}function B(K,$,re){const J=new Rr({initiator:!1,trickle:!1,stream:re});return J.on("signal",se=>{A.current.emit("returning-signal",{signal:se,callerID:$})}),J.signal(K),J}const F=()=>{w.current&&(w.current.getAudioTracks()[0].enabled=!n,p(!n))},I=()=>{w.current&&(w.current.getVideoTracks()[0].enabled=!f,g(!f))},L=()=>{r(-1)},q=()=>{navigator.clipboard.writeText(s||""),R(!0),setTimeout(()=>R(!1),2e3),tt.success("Meeting code copied!")};return H.jsxs("div",{className:"h-screen bg-gray-900 text-white flex flex-col",children:[H.jsxs("div",{className:"p-4 flex justify-between items-center bg-gray-800 border-b border-gray-700",children:[H.jsxs("div",{children:[H.jsx("h2",{className:"text-lg font-semibold",children:(v==null?void 0:v.title)||"Online Lecture"}),H.jsx("p",{className:"text-sm text-gray-400",children:(D=v==null?void 0:v.module)==null?void 0:D.moduleName})]}),H.jsxs("div",{className:"flex items-center space-x-4",children:[H.jsxs("div",{className:"flex items-center px-3 py-1 bg-gray-700 rounded-full border border-gray-600",children:[H.jsx("span",{className:"text-sm font-mono mr-2",children:s}),H.jsx("button",{onClick:q,className:"hover:text-primary-400",children:E?H.jsx(Qr,{className:"w-4 h-4 text-green-500"}):H.jsx(Zr,{className:"w-4 h-4"})})]}),H.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[H.jsx(Jr,{className:"w-4 h-4 mr-1"}),H.jsx("span",{children:a.length+1})]})]})]}),H.jsxs("div",{className:"flex-1 p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 overflow-y-auto content-start",children:[H.jsxs("div",{className:"relative aspect-video bg-gray-800 rounded-xl overflow-hidden border-2 border-primary-500 shadow-lg",children:[H.jsx("video",{muted:!0,ref:c,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover mirror"}),H.jsxs("div",{className:"absolute bottom-4 left-4 flex items-center bg-black bg-opacity-50 px-3 py-1 rounded-lg",children:[H.jsx("span",{className:"text-xs font-medium",children:"You (Host)"}),!n&&H.jsx(jt,{className:"w-3 h-3 ml-2 text-red-500"})]}),!f&&H.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800",children:H.jsx("div",{className:"w-20 h-20 bg-primary-600 rounded-full flex items-center justify-center text-3xl font-bold",children:(U=e==null?void 0:e.firstName)==null?void 0:U.charAt(0)})})]}),a.map((K,$)=>H.jsx(vn,{peer:K.peer},$))]}),H.jsxs("div",{className:"p-6 bg-gray-800 border-t border-gray-700 flex justify-center items-center space-x-6",children:[H.jsx("button",{onClick:F,className:`p-4 rounded-full transition ${n?"bg-gray-700 hover:bg-gray-600":"bg-red-500 hover:bg-red-600 text-white"}`,children:n?H.jsx(ei,{className:"w-6 h-6"}):H.jsx(jt,{className:"w-6 h-6"})}),H.jsx("button",{onClick:I,className:`p-4 rounded-full transition ${f?"bg-gray-700 hover:bg-gray-600":"bg-red-500 hover:bg-red-600 text-white"}`,children:f?H.jsx(Xr,{className:"w-6 h-6"}):H.jsx(ii,{className:"w-6 h-6"})}),H.jsx("button",{className:"p-4 rounded-full bg-gray-700 hover:bg-gray-600 transition",title:"Share Screen",children:H.jsx(ri,{className:"w-6 h-6"})}),H.jsx("button",{onClick:L,className:"p-4 rounded-full bg-red-600 hover:bg-red-700 transition",title:"Leave Meeting",children:H.jsx(ti,{className:"w-6 h-6"})})]})]})},vn=s=>{const e=ce.useRef(null);return ce.useEffect(()=>{s.peer.on("stream",r=>{e.current&&(e.current.srcObject=r)})},[s.peer]),H.jsxs("div",{className:"relative aspect-video bg-gray-800 rounded-xl overflow-hidden border border-gray-700 shadow-lg",children:[H.jsx("video",{playsInline:!0,autoPlay:!0,ref:e,className:"w-full h-full object-cover"}),H.jsx("div",{className:"absolute bottom-4 left-4 bg-black bg-opacity-50 px-3 py-1 rounded-lg",children:H.jsx("span",{className:"text-xs font-medium",children:"Participant"})})]})};export{xn as default};
