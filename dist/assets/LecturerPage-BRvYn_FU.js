import{e as R,r as l,b as y,j as e,a as z,z as d,u as W}from"./index-Cv_EM5B3.js";import{X as I,A as P,C as Q,B as D,D as G,S as J}from"./DashboardLayout-Dgk-_yJ3.js";import{S as X}from"./save-BnGpkhwG.js";import{U as _}from"./user-AQ183lw-.js";import{M as L}from"./mail-DSG3J4YO.js";import{P as E}from"./phone-gSTUTTg8.js";import{M as K}from"./map-pin-DPFV6g1q.js";import{B as Y}from"./building-DE96Jm2V.js";import{H as Z}from"./hash-BFl_i1Z-.js";import{P as ee}from"./plus-smBCJEhq.js";import{U as S}from"./video-D6oD5f21.js";import{E as se}from"./eye-WupJDer2.js";import{P as te}from"./pen-square-BIqX7x5-.js";import{T as ae}from"./trash-2-CpS1ADUT.js";import"./graduation-cap-DFyTfTku.js";import"./credit-card-DXrYcg-6.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=R("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),ie=({isOpen:p,onClose:m,lecturer:r,onSuccess:v})=>{const[g,a]=l.useState(!1),[w,o]=l.useState([]),[t,c]=l.useState({username:"",email:"",password:"",title:"Mr",firstName:"",lastName:"",gender:"MALE",dateOfBirth:"",nic:"",address:"",mobileNumber:"",homeNumber:"",specialization:"",qualification:"",centerId:""});l.useEffect(()=>{N()},[]);const N=async()=>{try{const n=await y.get("/centers/dropdown");o(n.data.data.centers)}catch(n){console.error("Failed to fetch centers",n)}};l.useEffect(()=>{var n,h;c(r?{username:r.user.username||"",email:r.user.email||"",password:"",title:r.user.title||"Mr",firstName:r.user.firstName||"",lastName:r.user.lastName||"",gender:r.user.gender||"MALE",dateOfBirth:((n=r.user.dateOfBirth)==null?void 0:n.split("T")[0])||"",nic:r.user.nic||"",address:r.user.address||"",mobileNumber:r.user.mobileNumber||"",homeNumber:r.user.homeNumber||"",specialization:r.specialization||"",qualification:r.qualification||"",centerId:((h=r.user.center)==null?void 0:h.id)||""}:{username:"",email:"",password:"",title:"Mr",firstName:"",lastName:"",gender:"MALE",dateOfBirth:"",nic:"",address:"",mobileNumber:"",homeNumber:"",specialization:"",qualification:"",centerId:""})},[r]);const i=n=>{c({...t,[n.target.name]:n.target.value})},f=()=>t.firstName.trim()?t.lastName.trim()?!t.email.trim()||!t.email.includes("@")?(d.error("Valid email is required"),!1):!t.username.trim()||t.username.length<3?(d.error("Username must be at least 3 characters"),!1):!r&&(!t.password||t.password.length<8)?(d.error("Password must be at least 8 characters"),!1):t.mobileNumber.trim()?t.nic.trim()?!0:(d.error("NIC is required"),!1):(d.error("Mobile number is required"),!1):(d.error("Last name is required"),!1):(d.error("First name is required"),!1),C=async n=>{var h,j;if(n.preventDefault(),!!f()){a(!0);try{r?(await y.put(`/lecturers/${r.id}`,{user:{title:t.title,firstName:t.firstName,lastName:t.lastName,email:t.email,gender:t.gender,dateOfBirth:t.dateOfBirth,nic:t.nic,address:t.address,mobileNumber:t.mobileNumber,homeNumber:t.homeNumber,centerId:t.centerId},specialization:t.specialization,qualification:t.qualification}),d.success("Lecturer updated successfully")):(await y.post("/lecturers",t),d.success("Lecturer created successfully")),v(),m()}catch(b){d.error(((j=(h=b.response)==null?void 0:h.data)==null?void 0:j.message)||`Failed to ${r?"update":"create"} lecturer`)}finally{a(!1)}}};return p?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:m}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[e.jsxs("div",{className:"bg-primary-600 px-6 py-4 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:r?"Edit Lecturer":"Add New Lecturer"}),e.jsx("button",{onClick:m,className:"text-white hover:text-gray-200 transition",children:e.jsx(I,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:C,children:[e.jsx("div",{className:"bg-white px-6 py-5 max-h-[calc(100vh-200px)] overflow-y-auto",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Personal Information"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Title ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"title",value:t.title,onChange:i,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"Mr",children:"Mr"}),e.jsx("option",{value:"Ms",children:"Ms"}),e.jsx("option",{value:"Mrs",children:"Mrs"}),e.jsx("option",{value:"Dr",children:"Dr"}),e.jsx("option",{value:"Prof",children:"Prof"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"firstName",value:t.firstName,onChange:i,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"John"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Last Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"lastName",value:t.lastName,onChange:i,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Doe"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Gender ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"gender",value:t.gender,onChange:i,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"MALE",children:"Male"}),e.jsx("option",{value:"FEMALE",children:"Female"}),e.jsx("option",{value:"OTHER",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Date of Birth ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"dateOfBirth",value:t.dateOfBirth,onChange:i,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["NIC ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"nic",value:t.nic,onChange:i,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"123456789V"})]}),e.jsx("div",{className:"md:col-span-2 mt-4",children:e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Account Information"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"username",value:t.username,onChange:i,required:!0,disabled:!!r,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-100",placeholder:"johndoe"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",name:"email",value:t.email,onChange:i,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"john.doe@example.com"})]}),!r&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"password",name:"password",value:t.password,onChange:i,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Minimum 8 characters"})]}),e.jsx("div",{className:"md:col-span-2 mt-4",children:e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Contact Information"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Mobile Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",name:"mobileNumber",value:t.mobileNumber,onChange:i,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"0771234567"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Home Number"}),e.jsx("input",{type:"tel",name:"homeNumber",value:t.homeNumber,onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"0112345678"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Address ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{name:"address",value:t.address,onChange:i,required:!0,rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter full address"})]}),e.jsx("div",{className:"md:col-span-2 mt-4",children:e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Professional Information"})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Center ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"centerId",value:t.centerId,onChange:i,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select Center"}),w.map(n=>e.jsx("option",{value:n.id,children:n.centerName},n.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specialization"}),e.jsx("input",{type:"text",name:"specialization",value:t.specialization,onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g., Computer Science, Mathematics"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Qualification"}),e.jsx("input",{type:"text",name:"qualification",value:t.qualification,onChange:i,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"e.g., PhD, MSc, BSc"})]})]})}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:m,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition",disabled:g,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"flex items-center px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition disabled:opacity-50",children:g?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"w-5 h-5 mr-2 animate-spin"}),r?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-5 h-5 mr-2"}),r?"Update Lecturer":"Create Lecturer"]})})]})]})]})]})}):null},le=({isOpen:p,onClose:m,lecturerId:r})=>{var t,c,N;const[v,g]=l.useState(!1),[a,w]=l.useState(null);l.useEffect(()=>{p&&r&&o()},[p,r]);const o=async()=>{try{g(!0);const i=await y.get(`/lecturers/${r}`);w(i.data.data.lecturer)}catch{d.error("Failed to fetch lecturer details"),m()}finally{g(!1)}};return p?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:m}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[e.jsxs("div",{className:"bg-primary-600 px-6 py-4 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Lecturer Details"}),e.jsx("button",{onClick:m,className:"text-white hover:text-gray-200 transition",children:e.jsx(I,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"bg-white px-6 py-5 max-h-[calc(100vh-200px)] overflow-y-auto",children:v?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(z,{className:"w-12 h-12 text-primary-600 animate-spin"})}):a?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-6 pb-6 border-b",children:[e.jsxs("div",{className:"w-24 h-24 bg-primary-100 rounded-full flex items-center justify-center text-primary-600 text-3xl font-bold",children:[a.user.firstName.charAt(0),a.user.lastName.charAt(0)]}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[a.user.title," ",a.user.firstName," ",a.user.lastName]}),e.jsx("p",{className:"text-gray-500 font-medium",children:a.specialization||"No Specialization"}),e.jsxs("div",{className:"mt-2 flex flex-wrap justify-center md:justify-start gap-2",children:[e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${a.user.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.user.isActive?"Active":"Inactive"}),e.jsx("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:"Lecturer"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(_,{className:"w-5 h-5 mr-2 text-primary-600"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 w-32",children:"NIC:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:a.user.nic})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 w-32",children:"Gender:"}),e.jsx("span",{className:"text-gray-900 font-medium capitalize",children:a.user.gender.toLowerCase()})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 w-32",children:"Date of Birth:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:new Date(a.user.dateOfBirth).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 w-32",children:"Join Date:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:new Date(a.user.createdAt).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(L,{className:"w-5 h-5 mr-2 text-primary-600"}),"Contact Information"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start text-sm",children:[e.jsx(L,{className:"w-4 h-4 mr-2 mt-0.5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Email Address"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.user.email})]})]}),e.jsxs("div",{className:"flex items-start text-sm",children:[e.jsx(E,{className:"w-4 h-4 mr-2 mt-0.5 text-gray-400"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Mobile"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.user.mobileNumber})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Home"}),e.jsx("p",{className:"text-gray-900 font-medium",children:a.user.homeNumber||"N/A"})]})]})]}),e.jsxs("div",{className:"flex items-start text-sm",children:[e.jsx(K,{className:"w-4 h-4 mr-2 mt-0.5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Current Address"}),e.jsx("p",{className:"text-gray-900 font-medium leading-relaxed",children:a.user.address})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(P,{className:"w-5 h-5 mr-2 text-primary-600"}),"Academic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Y,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{className:"text-gray-500 w-32",children:"Assigned Center:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:((t=a.user.center)==null?void 0:t.centerName)||"Not Assigned"})]}),e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Z,{className:"w-4 h-4 mr-2 text-gray-400"}),e.jsx("span",{className:"text-gray-500 w-32",children:"Reg Number:"}),e.jsx("span",{className:"text-gray-900 font-medium",children:a.user.registrationNumber})]}),e.jsxs("div",{className:"flex items-start text-sm",children:[e.jsx(re,{className:"w-4 h-4 mr-2 mt-0.5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-xs",children:"Qualification"}),e.jsx("p",{className:"text-gray-900 font-medium leading-relaxed",children:a.qualification||"No Qualification Listed"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(Q,{className:"w-5 h-5 mr-2 text-primary-600"}),"Workload Summary"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[e.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wider font-semibold",children:"Modules"}),e.jsx("p",{className:"text-2xl font-bold text-primary-600 mt-1",children:((c=a.stats)==null?void 0:c.moduleCount)||0})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-100",children:[e.jsx("p",{className:"text-gray-500 text-xs uppercase tracking-wider font-semibold",children:"Schedules"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:((N=a.stats)==null?void 0:N.scheduleCount)||0})]})]})]})]}),e.jsxs("div",{className:"space-y-4 pb-4",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(D,{className:"w-5 h-5 mr-2 text-primary-600"}),"Assigned Modules"]}),e.jsx("div",{className:"bg-white border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Module Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Module Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Program"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.modules&&a.modules.length>0?a.modules.map(i=>{var f;return e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:i.moduleCode}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:i.moduleName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:((f=i.program)==null?void 0:f.programName)||"N/A"})]},i.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No modules assigned yet."})})})]})})]})]}):e.jsx("div",{className:"text-center py-20",children:e.jsx("p",{className:"text-gray-500 italic",children:"No lecturer data available."})})}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end",children:e.jsx("button",{onClick:m,className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition font-medium",children:"Close"})})]})]})}):null},we=()=>{const{user:p}=W(),[m,r]=l.useState([]),[v,g]=l.useState(!0),[a,w]=l.useState(""),[o,t]=l.useState(1),[c,N]=l.useState(1),[i,f]=l.useState(!1),[C,n]=l.useState(!1),[h,j]=l.useState(null),[b,F]=l.useState({totalLecturers:0,activeLecturers:0,lecturersWithModules:0,totalModulesAssigned:0}),[u,B]=l.useState({isActive:"",specialization:"",centerId:""}),[O,T]=l.useState([]);l.useEffect(()=>{M(),A()},[o,a,u]),l.useEffect(()=>{U()},[]);const U=async()=>{try{const s=await y.get("/centers/dropdown");T(s.data.data.centers)}catch(s){console.error("Failed to fetch centers",s)}},M=async()=>{try{g(!0);const s=new URLSearchParams({page:o.toString(),limit:"10",...a&&{search:a},...u.isActive&&{isActive:u.isActive},...u.specialization&&{specialization:u.specialization},...u.centerId&&{centerId:u.centerId}}),x=await y.get(`/lecturers?${s}`);r(x.data.data.lecturers),N(x.data.data.pagination.pages)}catch(s){d.error("Failed to fetch lecturers"),console.error(s)}finally{g(!1)}},A=async()=>{try{const s=await y.get("/lecturers/stats");F(s.data.data)}catch(s){console.error("Failed to fetch stats:",s)}},$=async s=>{var x,q;if(window.confirm("Are you sure you want to deactivate this lecturer?"))try{await y.delete(`/lecturers/${s}`),d.success("Lecturer deactivated successfully"),M(),A()}catch(H){d.error(((q=(x=H.response)==null?void 0:x.data)==null?void 0:q.message)||"Failed to deactivate lecturer")}},V=s=>{w(s.target.value),t(1)},k=(s,x)=>{B({...u,[s]:x}),t(1)};return e.jsxs(G,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Lecturers"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage teaching staff"})]}),e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition",children:[e.jsx(ee,{className:"w-5 h-5 mr-2"}),"Add Lecturer"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-5 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Lecturers"}),e.jsx("p",{className:"text-2xl font-bold",children:b.totalLecturers})]}),e.jsx(S,{className:"w-10 h-10 text-blue-500"})]})}),e.jsx("div",{className:"bg-white p-5 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:b.activeLecturers})]}),e.jsx(S,{className:"w-10 h-10 text-green-500"})]})}),e.jsx("div",{className:"bg-white p-5 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"With Modules"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:b.lecturersWithModules})]}),e.jsx(D,{className:"w-10 h-10 text-purple-500"})]})}),e.jsx("div",{className:"bg-white p-5 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Modules Assigned"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:b.totalModulesAssigned})]}),e.jsx(P,{className:"w-10 h-10 text-orange-500"})]})})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search lecturers...",value:a,onChange:V,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),(p==null?void 0:p.role)==="ADMIN"&&e.jsxs("select",{value:u.centerId,onChange:s=>k("centerId",s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Centers"}),O.map(s=>e.jsx("option",{value:s.id,children:s.centerName},s.id))]}),e.jsxs("select",{value:u.isActive,onChange:s=>k("isActive",s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"true",children:"Active"}),e.jsx("option",{value:"false",children:"Inactive"})]}),e.jsx("input",{type:"text",placeholder:"Filter by specialization...",value:u.specialization,onChange:s=>k("specialization",s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:v?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):m.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(S,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No lecturers found"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lecturer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Specialization"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Modules"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(s=>{var x;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"w-10 h-10 bg-primary-600 rounded-full flex items-center justify-center text-white font-semibold",children:[s.user.firstName.charAt(0),s.user.lastName.charAt(0)]}),e.jsxs("div",{className:"ml-4",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[s.user.firstName," ",s.user.lastName]}),e.jsx("div",{className:"text-sm text-gray-500",children:s.user.registrationNumber})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("div",{className:"text-sm text-gray-900 flex items-center",children:[e.jsx(L,{className:"w-4 h-4 mr-1 text-gray-400"}),s.user.email]}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(E,{className:"w-4 h-4 mr-1 text-gray-400"}),s.user.mobileNumber]})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900",children:s.specialization||"Not specified"}),s.qualification&&e.jsx("div",{className:"text-sm text-gray-500",children:s.qualification})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800",children:[((x=s.stats)==null?void 0:x.moduleCount)||0," Modules"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${s.user.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.user.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>{j(s),n(!0)},className:"text-green-600 hover:text-green-900",title:"View",children:e.jsx(se,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{j(s),f(!0)},className:"text-green-600 hover:text-green-900",title:"Edit",children:e.jsx(te,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>$(s.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(ae,{className:"w-5 h-5"})})]})})]},s.id)})})]})}),e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>t(s=>Math.max(1,s-1)),disabled:o===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>t(s=>Math.min(c,s+1)),disabled:o===c,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Page ",e.jsx("span",{className:"font-medium",children:o})," of"," ",e.jsx("span",{className:"font-medium",children:c})]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>t(s=>Math.max(1,s-1)),disabled:o===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),Array.from({length:Math.min(5,c)},(s,x)=>x+1).map(s=>e.jsx("button",{onClick:()=>t(s),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${o===s?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:s},s)),e.jsx("button",{onClick:()=>t(s=>Math.min(c,s+1)),disabled:o===c,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})]})})]}),e.jsx(ie,{isOpen:i,onClose:()=>{f(!1),j(null)},lecturer:h,onSuccess:()=>{M(),A()}}),e.jsx(le,{isOpen:C,onClose:()=>{n(!1),j(null)},lecturerId:(h==null?void 0:h.id)||null})]})};export{we as default};
