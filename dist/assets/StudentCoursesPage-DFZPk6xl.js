import{r as t,b as c,j as e,L as m}from"./index-Cv_EM5B3.js";import{D as N,S as v,B as x,F as w}from"./DashboardLayout-Dgk-_yJ3.js";import{C}from"./clock-YOqg-tzx.js";import{C as S}from"./chevron-right-D0Dpbexo.js";import"./graduation-cap-DFyTfTku.js";import"./credit-card-DXrYcg-6.js";import"./video-D6oD5f21.js";const P=()=>{const[r,h]=t.useState([]),[u,g]=t.useState(!0),[l,p]=t.useState("");t.useEffect(()=>{f()},[]);const f=async()=>{try{const s=await c.get("/dashboard/student");h(s.data.data.enrolledModules||[])}catch(s){console.error("Failed to fetch enrolled courses:",s)}finally{g(!1)}},[d,y]=t.useState({});t.useEffect(()=>{r.length>0&&j()},[r]);const j=async()=>{try{const s=r.map(i=>c.get(`/video-meetings/module/${i.id}`)),a=await Promise.all(s),o={};r.forEach((i,b)=>{o[i.id]=a[b].data.data.meetings}),y(o)}catch(s){console.error("Failed to fetch active meetings:",s)}},n=r.filter(s=>s.moduleName.toLowerCase().includes(l.toLowerCase())||s.moduleCode.toLowerCase().includes(l.toLowerCase()));return e.jsx(N,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Courses"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage your enrolled modules and study materials."})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(v,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search courses...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm",value:l,onChange:s=>p(s.target.value)})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u?e.jsx("div",{className:"col-span-full flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n.length>0?n.map(s=>{var a;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"p-2 bg-primary-50 rounded-lg",children:e.jsx(x,{className:"h-6 w-6 text-primary-600"})}),e.jsx("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:s.moduleCode})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 line-clamp-1",children:s.moduleName}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Semester ",s.semesterNumber]})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[((a=d[s.id])==null?void 0:a.length)>0&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-100 mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-xs font-bold text-green-700 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 mr-2 animate-pulse"}),"LIVE NOW"]}),e.jsx(m,{to:`/video/room/${d[s.id][0].meetingCode}`,className:"text-xs font-bold text-white bg-green-600 px-2 py-1 rounded hover:bg-green-700 transition",children:"JOIN"})]}),e.jsx("p",{className:"text-xs text-green-800 font-medium truncate",children:d[s.id][0].title})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:[s.credits," Credits"]})]})]})]}),e.jsxs("div",{className:"px-5 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs(m,{to:`/student/modules/${s.id}/materials`,className:"flex items-center text-sm font-medium text-primary-600 hover:text-primary-700",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Study Materials"]}),e.jsx(S,{className:"h-4 w-4 text-gray-400"})]})]},s.id)}):e.jsxs("div",{className:"col-span-full py-12 bg-white rounded-xl border-2 border-dashed border-gray-300 text-center",children:[e.jsx(x,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No courses found"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"You are not enrolled in any courses yet."})]})})]})})};export{P as default};
