import{r as n,b as N,z as x,j as e,a as U,u as H}from"./index-Cv_EM5B3.js";import{X as $,C as S,B as V,D as R,S as X}from"./DashboardLayout-Dgk-_yJ3.js";import{S as Y}from"./save-BnGpkhwG.js";import{I as J}from"./info-BgLrENgl.js";import{H as K}from"./hash-BFl_i1Z-.js";import{M as Q}from"./map-pin-DPFV6g1q.js";import{U as O}from"./video-D6oD5f21.js";import{C as T}from"./clock-YOqg-tzx.js";import{P as W}from"./plus-smBCJEhq.js";import{E as Z}from"./eye-WupJDer2.js";import{P as ee}from"./pen-square-BIqX7x5-.js";import{T as se}from"./trash-2-CpS1ADUT.js";import"./graduation-cap-DFyTfTku.js";import"./credit-card-DXrYcg-6.js";const te=({isOpen:g,onClose:h,batch:d,onSuccess:P})=>{const[f,t]=n.useState(!1),[I,o]=n.useState(!1),[i,p]=n.useState([]),[B,w]=n.useState([]),[l,v]=n.useState({batchNumber:"",startDate:"",endDate:"",programId:"",status:"UPCOMING",centerId:""});n.useEffect(()=>{g&&(j(),C())},[g]);const C=async()=>{try{const r=await N.get("/centers");w(r.data.data.centers||[])}catch(r){console.error("Failed to fetch centers:",r)}};n.useEffect(()=>{var r,D,c,y,A;if(d)v({batchNumber:d.batchNumber||"",startDate:((r=d.startDate)==null?void 0:r.split("T")[0])||"",endDate:((D=d.endDate)==null?void 0:D.split("T")[0])||"",programId:((c=d.program)==null?void 0:c.id)||"",status:d.status||"UPCOMING",centerId:((A=(y=d.centers)==null?void 0:y[0])==null?void 0:A.id)||""});else{const k=new Date().getFullYear(),M=String(new Date().getMonth()+1).padStart(2,"0");v({batchNumber:`BATCH_${k}_${M}`,startDate:"",endDate:"",programId:"",status:"UPCOMING",centerId:""})}},[d]);const j=async()=>{try{o(!0);const r=await N.get("/programs/dropdown");p(r.data.data.programs)}catch(r){console.error("Failed to fetch programs:",r),x.error("Failed to load programs")}finally{o(!1)}},m=r=>{v({...l,[r.target.name]:r.target.value})},a=()=>l.batchNumber.trim()?l.startDate?l.programId?l.endDate&&new Date(l.endDate)<=new Date(l.startDate)?(x.error("End date must be after start date"),!1):l.centerId?!0:(x.error("Please select a center"),!1):(x.error("Please select a program"),!1):(x.error("Start date is required"),!1):(x.error("Batch number is required"),!1),E=async r=>{var D,c;if(r.preventDefault(),!!a()){t(!0);try{const y={batchNumber:l.batchNumber,startDate:l.startDate,endDate:l.endDate||null,programId:l.programId,status:l.status,centerIds:[l.centerId]};d?(await N.put(`/batches/${d.id}`,y),x.success("Batch updated successfully")):(await N.post("/batches",y),x.success("Batch created successfully")),P(),h()}catch(y){x.error(((c=(D=y.response)==null?void 0:D.data)==null?void 0:c.message)||`Failed to ${d?"update":"create"} batch`)}finally{t(!1)}}};return g?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:h}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[e.jsxs("div",{className:"bg-primary-600 px-6 py-4 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:d?"Edit Batch":"Add New Batch"}),e.jsx("button",{onClick:h,className:"text-white hover:text-gray-200 transition",children:e.jsx($,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:E,children:[e.jsx("div",{className:"bg-white px-6 py-5 space-y-6",children:I?e.jsx("div",{className:"flex justify-center items-center py-8",children:e.jsx(U,{className:"w-8 h-8 animate-spin text-primary-600"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Batch Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"batchNumber",value:l.batchNumber,onChange:m,required:!0,disabled:!!d,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-100",placeholder:"e.g., BATCH_2024_01"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unique identifier for the batch"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Program ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"programId",value:l.programId,onChange:m,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select a program"}),i.map(r=>e.jsxs("option",{value:r.id,children:[r.programCode," - ",r.programName]},r.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Start Date ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",name:"startDate",value:l.startDate,onChange:m,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),e.jsx("input",{type:"date",name:"endDate",value:l.endDate,onChange:m,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Optional"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Center ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"centerId",value:l.centerId,onChange:m,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select a center"}),B.map(r=>e.jsx("option",{value:r.id,children:r.centerName},r.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Status ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{name:"status",value:l.status,onChange:m,required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"UPCOMING",children:"Upcoming"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"COMPLETED",children:"Completed"})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Note:"})," Once created, the batch number cannot be changed. Students can be enrolled in this batch after creation."]})})]})}),e.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:h,className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition",disabled:f,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f||I,className:"flex items-center px-6 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition disabled:opacity-50",children:f?e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-5 h-5 mr-2 animate-spin"}),d?"Updating...":"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-5 h-5 mr-2"}),d?"Update Batch":"Create Batch"]})})]})]})]})]})}):null},ae=({isOpen:g,onClose:h,batchId:d})=>{var B,w,l,v,C,j,m;const[P,f]=n.useState(!1),[t,I]=n.useState(null);n.useEffect(()=>{g&&d&&o()},[g,d]);const o=async()=>{try{f(!0);const a=await N.get(`/batches/${d}`);I(a.data.data.batch)}catch{x.error("Failed to fetch batch details"),h()}finally{f(!1)}},i=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",p=a=>{switch(a){case"ACTIVE":return"bg-green-100 text-green-800";case"UPCOMING":return"bg-blue-100 text-blue-800";case"COMPLETED":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return g?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:h}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[e.jsxs("div",{className:"bg-primary-600 px-6 py-4 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Batch Details"}),e.jsx("button",{onClick:h,className:"text-white hover:text-gray-200 transition",children:e.jsx($,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"bg-white px-6 py-5 max-h-[calc(100vh-200px)] overflow-y-auto",children:P?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(U,{className:"w-12 h-12 text-primary-600 animate-spin"})}):t?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start space-y-4 md:space-y-0 md:space-x-6 pb-6 border-b",children:[e.jsx("div",{className:"w-24 h-24 bg-primary-100 rounded-lg flex items-center justify-center text-primary-600",children:e.jsx(S,{className:"w-12 h-12"})}),e.jsxs("div",{className:"text-center md:text-left",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.batchNumber}),e.jsxs("p",{className:"text-gray-500 font-medium",children:[(B=t.program)==null?void 0:B.programName," (",(w=t.program)==null?void 0:w.programCode,")"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap justify-center md:justify-start gap-2",children:[e.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${p(t.status)}`,children:t.status}),e.jsxs("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:[i(t.startDate)," - ",t.endDate?i(t.endDate):"Present"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider flex items-center",children:[e.jsx(J,{className:"w-4 h-4 mr-2"})," General Information"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(K,{className:"w-5 h-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Batch Number"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.batchNumber})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(V,{className:"w-5 h-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Program"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:(l=t.program)==null?void 0:l.programName})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx(S,{className:"w-5 h-5 text-gray-400 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Date Range"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[i(t.startDate)," to ",t.endDate?i(t.endDate):"N/A"]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider flex items-center",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"})," Assigned Centers"]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:t.centers&&t.centers.length>0?t.centers.map(a=>e.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-500 rounded-full mr-2"}),a.centerName," (",a.branch,")"]},a.id)):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"No centers assigned."})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider flex items-center",children:[e.jsx(O,{className:"w-4 h-4 mr-2"})," Batch Statistics"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"Total Enrollments"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900 mt-1",children:((v=t.stats)==null?void 0:v.enrollmentCount)||0})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100",children:[e.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Active Students"}),e.jsx("p",{className:"text-2xl font-bold text-green-900 mt-1",children:((C=t.stats)==null?void 0:C.activeEnrollments)||0})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100",children:[e.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Total Schedules"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900 mt-1",children:((j=t.stats)==null?void 0:j.scheduleCount)||0})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-100",children:[e.jsx("p",{className:"text-xs text-orange-600 font-medium",children:"Completed Sessions"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900 mt-1",children:((m=t.stats)==null?void 0:m.completedSchedules)||0})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 pt-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h5",{className:"text-sm font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx(O,{className:"w-4 h-4 mr-2 text-primary-600"}),"Students"]}),t.enrollments&&t.enrollments.length>0?e.jsxs("div",{className:"space-y-3",children:[t.enrollments.slice(0,5).map(a=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-gray-100 shadow-sm",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-800",children:[a.student.user.firstName," ",a.student.user.lastName]}),e.jsx("p",{className:"text-xs text-gray-500",children:a.student.studentId})]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${a.status==="ACTIVE"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a.status})]},a.id)),t.enrollments.length>5&&e.jsxs("p",{className:"text-xs text-center text-gray-500 pt-2",children:["+ ",t.enrollments.length-5," more students"]})]}):e.jsx("p",{className:"text-sm text-gray-500 italic text-center py-4",children:"No students enrolled."})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("h5",{className:"text-sm font-bold text-gray-900 mb-3 flex items-center",children:[e.jsx(T,{className:"w-4 h-4 mr-2 text-primary-600"}),"Recent Schedules"]}),t.schedules&&t.schedules.length>0?e.jsxs("div",{className:"space-y-3",children:[t.schedules.slice(0,5).map(a=>{var E;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-gray-100 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800",children:(E=a.module)==null?void 0:E.moduleName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[i(a.date)," â€¢ ",a.startTime.substring(0,5)]})]}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${a.status==="COMPLETED"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:a.status})]},a.id)}),t.schedules.length>5&&e.jsxs("p",{className:"text-xs text-center text-gray-500 pt-2",children:["+ ",t.schedules.length-5," more schedules"]})]}):e.jsx("p",{className:"text-sm text-gray-500 italic text-center py-4",children:"No schedules found."})]})]}),e.jsxs("div",{className:"pt-6 border-t flex justify-between text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"w-3 h-3 mr-1"}),"Created: ",new Date(t.createdAt).toLocaleString()]}),t.updatedAt&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"w-3 h-3 mr-1"}),"Updated: ",new Date(t.updatedAt).toLocaleString()]})]})]}):e.jsx("div",{className:"text-center py-20",children:e.jsx("p",{className:"text-gray-500",children:"No batch data found."})})}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 flex justify-end",children:e.jsx("button",{type:"button",onClick:h,className:"px-6 py-2 bg-white border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100 transition",children:"Close"})})]})]})}):null},fe=()=>{const{user:g}=H(),[h,d]=n.useState([]),[P,f]=n.useState(!0),[t,I]=n.useState(""),[o,i]=n.useState(1),[p,B]=n.useState(1),[w,l]=n.useState(!1),[v,C]=n.useState(!1),[j,m]=n.useState(null),[a,E]=n.useState([]),[r,D]=n.useState({totalBatches:0,activeBatches:0,upcomingBatches:0,completedBatches:0}),[c,y]=n.useState({status:"",programId:"",centerId:""});n.useEffect(()=>{k(),M()},[o,t,c]),n.useEffect(()=>{A()},[]);const A=async()=>{try{const s=await N.get("/centers");E(s.data.data.centers||[])}catch(s){console.error("Failed to fetch centers:",s)}},k=async()=>{try{f(!0);const s=new URLSearchParams({page:o.toString(),limit:"12",...t&&{search:t},...c.status&&{status:c.status},...c.programId&&{programId:c.programId},...c.centerId&&{centerId:c.centerId}}),u=await N.get(`/batches?${s}`);d(u.data.data.batches),B(u.data.data.pagination.pages)}catch(s){x.error("Failed to fetch batches"),console.error(s)}finally{f(!1)}},M=async()=>{try{const s=await N.get("/batches/stats");D(s.data.data)}catch(s){console.error("Failed to fetch stats:",s)}},q=async s=>{var u,b;if(window.confirm("Are you sure you want to delete this batch?"))try{await N.delete(`/batches/${s}`),x.success("Batch deleted successfully"),k(),M()}catch(_){x.error(((b=(u=_.response)==null?void 0:u.data)==null?void 0:b.message)||"Failed to delete batch")}},G=s=>{I(s.target.value),i(1)},F=(s,u)=>{y({...c,[s]:u}),i(1)},z=s=>{switch(s){case"ACTIVE":return"bg-green-100 text-green-800";case"UPCOMING":return"bg-blue-100 text-blue-800";case"COMPLETED":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},L=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs(R,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Batches"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage student batches"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition",children:[e.jsx(W,{className:"w-5 h-5 mr-2"}),"Add Batch"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white p-5 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Batches"}),e.jsx("p",{className:"text-2xl font-bold",children:r.totalBatches})]}),e.jsx(S,{className:"w-10 h-10 text-blue-500"})]})}),e.jsx("div",{className:"bg-white p-5 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.activeBatches})]}),e.jsx(T,{className:"w-10 h-10 text-green-500"})]})}),e.jsx("div",{className:"bg-white p-5 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Upcoming"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.upcomingBatches})]}),e.jsx(S,{className:"w-10 h-10 text-blue-500"})]})}),e.jsx("div",{className:"bg-white p-5 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-600",children:r.completedBatches})]}),e.jsx(V,{className:"w-10 h-10 text-gray-500"})]})})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(X,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by batch number or program...",value:t,onChange:G,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex gap-4",children:[(g==null?void 0:g.role)==="ADMIN"&&e.jsxs("select",{value:c.centerId,onChange:s=>F("centerId",s.target.value),className:"w-full md:w-48 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Centers"}),a.map(s=>e.jsx("option",{value:s.id,children:s.centerName},s.id))]}),e.jsxs("select",{value:c.status,onChange:s=>F("status",s.target.value),className:"w-full md:w-48 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"UPCOMING",children:"Upcoming"}),e.jsx("option",{value:"ACTIVE",children:"Active"}),e.jsx("option",{value:"COMPLETED",children:"Completed"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:P?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(S,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"No batches found"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:h.map(s=>{var u,b;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-5 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary-100 text-primary-800",children:s.batchNumber}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${z(s.status)}`,children:s.status})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:s.program.programName}),e.jsx("p",{className:"text-sm text-gray-600",children:s.program.programCode})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:["Start: ",L(s.startDate)]})]}),s.endDate&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{children:["End: ",L(s.endDate)]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Students"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:((u=s.stats)==null?void 0:u.enrollmentCount)||0})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Active"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:((b=s.stats)==null?void 0:b.activeEnrollments)||0})]})]}),e.jsxs("div",{className:"flex space-x-2 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>{m(s),C(!0)},className:"flex-1 flex items-center justify-center px-3 py-2 text-sm text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition",title:"View Details",children:[e.jsx(Z,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsxs("button",{onClick:()=>{m(s),l(!0)},className:"flex-1 flex items-center justify-center px-3 py-2 text-sm text-green-600 bg-green-50 rounded-lg hover:bg-green-100 transition",title:"Edit",children:[e.jsx(ee,{className:"w-4 h-4 mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>q(s.id),className:"flex-1 flex items-center justify-center px-3 py-2 text-sm text-red-600 bg-red-50 rounded-lg hover:bg-red-100 transition",title:"Delete",children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]},s.id)})}),e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>i(s=>Math.max(1,s-1)),disabled:o===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),e.jsx("button",{onClick:()=>i(s=>Math.min(p,s+1)),disabled:o===p,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Page ",e.jsx("span",{className:"font-medium",children:o})," of"," ",e.jsx("span",{className:"font-medium",children:p})]})}),e.jsx("div",{children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[e.jsx("button",{onClick:()=>i(s=>Math.max(1,s-1)),disabled:o===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),Array.from({length:Math.min(5,p)},(s,u)=>{const b=u+1+Math.max(0,o-3);return b>p?null:e.jsx("button",{onClick:()=>i(b),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${b===o?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:b},b)}),e.jsx("button",{onClick:()=>i(s=>Math.min(p,s+1)),disabled:o===p,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})]})})]}),w&&e.jsx(te,{isOpen:w,onClose:()=>{l(!1),m(null)},onSuccess:()=>{k(),M()},batch:j}),e.jsx(ae,{isOpen:v,onClose:()=>{C(!1),m(null)},batchId:(j==null?void 0:j.id)||null})]})};export{fe as default};
