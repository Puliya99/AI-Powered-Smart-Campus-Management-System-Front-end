import{c as b,d as y,r as i,j as e,L as d,b as x}from"./index-Cv_EM5B3.js";import{D as c,B as w,C as v,F as D,d as C}from"./DashboardLayout-Dgk-_yJ3.js";import{A as h}from"./arrow-left-DFjmxUWB.js";import{G as L}from"./graduation-cap-DFyTfTku.js";import{U as g,V as k}from"./video-D6oD5f21.js";import{C as p}from"./clock-YOqg-tzx.js";import{M}from"./map-pin-DPFV6g1q.js";import"./credit-card-DXrYcg-6.js";const T=()=>{const{id:a}=b(),u=y(),[t,j]=i.useState(null),[N,n]=i.useState(!0),[m,f]=i.useState(null);return i.useEffect(()=>{a&&(async()=>{var r,o;try{const l=await x.get(`/modules/${a}`);j(l.data.data.module),n(!1)}catch(l){f(((o=(r=l.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to fetch module details"),n(!1)}})()},[a]),N?e.jsx(c,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})})}):m||!t?e.jsx(c,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:e.jsx("p",{className:"text-red-700",children:m||"Module not found"})}),e.jsxs(d,{to:"/lecturer/classes",className:"mt-4 inline-flex items-center text-indigo-600 hover:text-indigo-500",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Back to My Classes"]})]})}):e.jsx(c,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs(d,{to:"/lecturer/classes",className:"inline-flex items-center text-sm text-gray-500 hover:text-indigo-600 mb-2",children:[e.jsx(h,{className:"h-4 w-4 mr-1"}),"Back to My Classes"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t.moduleName}),e.jsxs("p",{className:"text-gray-500",children:[t.moduleCode," • Semester ",t.semesterNumber," •"," ",t.credits," Credits"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(w,{className:"h-5 w-5 mr-2 text-indigo-500"}),"Module Overview"]}),e.jsx("div",{className:"prose prose-indigo max-w-none",children:e.jsx("p",{className:"text-gray-600 leading-relaxed",children:t.description||"No description available for this module."})}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(L,{className:"h-8 w-8 text-indigo-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase font-semibold",children:"Program"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:t.program.programName})]})]}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(g,{className:"h-8 w-8 text-indigo-500 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase font-semibold",children:"Enrolled Batches"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:[...new Set(t.schedules.map(s=>s.batch.batchNumber))].join(", ")||"No batches assigned"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(v,{className:"h-5 w-5 mr-2 text-indigo-500"}),"Upcoming Schedules"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Batch"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.schedules.length>0?t.schedules.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(s.date).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{className:"h-3 w-3 mr-1"}),s.startTime," - ",s.endTime]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:s.batch.batchNumber}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"h-3 w-3 mr-1"}),s.lectureHall]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-4 text-center text-sm text-gray-500",children:"No upcoming schedules found."})})})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs(d,{to:`/lecturer/modules/${a}/materials`,className:"flex items-center justify-start w-full px-4 py-3 text-sm font-medium text-indigo-700 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors",children:[e.jsx(D,{className:"h-5 w-5 mr-3"}),"Lecture Materials"]}),e.jsxs("button",{className:"flex items-center justify-start w-full px-4 py-3 text-sm font-medium text-green-700 bg-green-50 rounded-lg hover:bg-green-100 transition-colors",children:[e.jsx(C,{className:"h-5 w-5 mr-3"}),"Create Assignment"]}),e.jsxs("button",{onClick:async()=>{try{const s=`Online Lecture: ${t.moduleName} - ${new Date().toLocaleDateString()}`,r=await x.post("/video-meetings",{title:s,moduleId:a});u(`/video/room/${r.data.data.meeting.meetingCode}`)}catch(s){console.error("Failed to start online lecture:",s)}},className:"flex items-center justify-start w-full px-4 py-3 text-sm font-medium text-amber-700 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:[e.jsx(k,{className:"h-5 w-5 mr-3"}),"Start Online Lecture"]}),e.jsxs("button",{className:"flex items-center justify-start w-full px-4 py-3 text-sm font-medium text-amber-700 bg-amber-50 rounded-lg hover:bg-amber-100 transition-colors",children:[e.jsx(g,{className:"h-5 w-5 mr-3"}),"Mark Attendance"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Assignments"}),e.jsxs("div",{className:"space-y-4",children:[t.assignments.length>0?t.assignments.map(s=>e.jsxs("div",{className:"border-b border-gray-100 pb-3 last:border-0 last:pb-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.title}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center",children:[e.jsx(p,{className:"h-3 w-3 mr-1"}),"Due: ",new Date(s.dueDate).toLocaleDateString()]})]},s.id)):e.jsx("p",{className:"text-sm text-gray-500",children:"No assignments created yet."}),e.jsx("button",{className:"text-sm text-indigo-600 font-semibold hover:text-indigo-500",children:"View All Assignments"})]})]})]})]})]})})};export{T as default};
