import{d as C,r,b as n,z as i,j as e}from"./index-Cv_EM5B3.js";import{D as S,C as M,X as k}from"./DashboardLayout-Dgk-_yJ3.js";import{P as h}from"./plus-smBCJEhq.js";import{V as g,U as L}from"./video-D6oD5f21.js";import{A as D}from"./arrow-right-Dt1PBQWj.js";import"./graduation-cap-DFyTfTku.js";import"./credit-card-DXrYcg-6.js";const E=()=>{const d=C(),[c,p]=r.useState([]),[f,m]=r.useState(!0),[y,a]=r.useState(!1),[b,j]=r.useState([]),[t,x]=r.useState({title:"",moduleId:""});r.useEffect(()=>{v(),N()},[]);const v=async()=>{try{m(!0);const s=await n.get("/video-meetings/my-active");p(s.data.data.meetings)}catch(s){console.error("Failed to fetch meetings:",s),i.error("Failed to load active meetings")}finally{m(!1)}},N=async()=>{try{const s=await n.get("/lecturers/profile/me");j(s.data.data.lecturer.modules||[])}catch(s){console.error("Failed to fetch modules:",s)}},w=async s=>{var l,u;if(s.preventDefault(),!t.title||!t.moduleId)return i.error("Please fill all fields");try{const o=await n.post("/video-meetings",t);i.success("Meeting created successfully!"),a(!1),d(`/video/room/${o.data.data.meeting.meetingCode}`)}catch(o){i.error(((u=(l=o.response)==null?void 0:l.data)==null?void 0:u.message)||"Failed to create meeting")}};return e.jsx(S,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Online Classes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Host and manage virtual lectures."})]}),e.jsxs("button",{onClick:()=>a(!0),className:"inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(h,{className:"h-5 w-5 mr-2"}),"Start Online Lecture"]})]}),f?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):c.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(s=>{var l;return e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-2 bg-primary-50 rounded-lg",children:e.jsx(g,{className:"h-6 w-6 text-primary-600"})}),e.jsxs("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 flex items-center",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-green-500 mr-1.5 animate-pulse"}),"Live"]})]}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:(l=s.module)==null?void 0:l.moduleName}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(M,{className:"h-3.5 w-3.5 mr-2"}),"Started ",new Date(s.startTime).toLocaleTimeString()]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(L,{className:"h-3.5 w-3.5 mr-2"}),"Meeting Code:"," ",e.jsx("span",{className:"ml-1 font-mono font-bold text-gray-700",children:s.meetingCode})]})]}),e.jsxs("button",{onClick:()=>d(`/video/room/${s.meetingCode}`),className:"w-full inline-flex items-center justify-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:["Join Room",e.jsx(D,{className:"h-4 w-4 ml-2"})]})]})},s.id)})}):e.jsxs("div",{className:"text-center py-16 bg-white rounded-xl border-2 border-dashed border-gray-300",children:[e.jsx(g,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No active classes"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Start a new online lecture to interact with your students."}),e.jsxs("button",{onClick:()=>a(!0),className:"mt-6 inline-flex items-center px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:[e.jsx(h,{className:"h-5 w-5 mr-2"}),"Start First Class"]})]}),y&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between bg-primary-600",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Start Online Lecture"}),e.jsx("button",{onClick:()=>a(!1),className:"text-white hover:text-gray-200 transition-colors",children:e.jsx(k,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lecture Title"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",placeholder:"e.g., Introduction to Advanced React",value:t.title,onChange:s=>x({...t,title:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Module"}),e.jsxs("select",{required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 outline-none",value:t.moduleId,onChange:s=>x({...t,moduleId:s.target.value}),children:[e.jsx("option",{value:"",children:"Select a module"}),b.map(s=>e.jsxs("option",{value:s.id,children:[s.moduleCode," - ",s.moduleName]},s.id))]})]}),e.jsxs("div",{className:"pt-4 flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Start Class"})]})]})]})})]})})};export{E as default};
