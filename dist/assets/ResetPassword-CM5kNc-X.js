import{c as I,d as F,r,j as e,a as d,L as T,b as f,z as t}from"./index-Cv_EM5B3.js";import{C as V}from"./check-circle-C2ph5B4V.js";import{G as q}from"./graduation-cap-DFyTfTku.js";import{L as h}from"./lock-C4emi0Rs.js";import{E as w}from"./eye-off-Br-IJGNK.js";import{E as y}from"./eye-WupJDer2.js";const Z=()=>{const{token:n}=I(),g=F(),[s,b]=r.useState({password:"",confirmPassword:""}),[i,j]=r.useState(!1),[o,N]=r.useState(!1),[c,m]=r.useState(!1),[v,P]=r.useState(!0),[k,x]=r.useState(!1),[C,S]=r.useState(!1);r.useEffect(()=>{n&&(async()=>{try{await f.get(`/password/verify-token/${n}`),x(!0)}catch{t.error("Invalid or expired reset link"),x(!1)}finally{P(!1)}})()},[n]);const u=a=>{b({...s,[a.target.name]:a.target.value})},E=()=>s.password.length<8?(t.error("Password must be at least 8 characters"),!1):/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(s.password)?s.password!==s.confirmPassword?(t.error("Passwords do not match"),!1):!0:(t.error("Password must contain uppercase, lowercase, and number"),!1),L=async a=>{var l,p;if(a.preventDefault(),!!E()){m(!0);try{await f.post("/password/reset-password",{token:n,newPassword:s.password}),S(!0),t.success("Password reset successfully!"),setTimeout(()=>{g("/login")},3e3)}catch(R){t.error(((p=(l=R.response)==null?void 0:l.data)==null?void 0:p.message)||"Failed to reset password")}finally{m(!1)}}};return v?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx(d,{className:"w-12 h-12 text-primary-600 animate-spin mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Verifying reset link..."})]})}):k?C?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 px-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"bg-green-100 p-4 rounded-full",children:e.jsx(V,{className:"w-16 h-16 text-green-600"})})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Password Reset!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your password has been successfully reset."}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Redirecting to login page..."}),e.jsx(d,{className:"w-6 h-6 text-primary-600 animate-spin mx-auto"})]})})})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 px-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"bg-gradient-to-br from-primary-500 to-primary-700 p-4 rounded-2xl shadow-lg",children:e.jsx(q,{className:"w-12 h-12 text-white"})})}),e.jsx("h2",{className:"text-4xl font-bold text-gray-900 tracking-tight",children:"Reset Password"}),e.jsx("p",{className:"mt-3 text-base text-gray-600",children:"Enter your new password below"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:e.jsxs("form",{className:"space-y-6",onSubmit:L,children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(h,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:i?"text":"password",required:!0,value:s.password,onChange:u,className:"block w-full pl-12 pr-12 py-3.5 border border-gray-300 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition duration-200 text-base",placeholder:"Enter new password"}),e.jsx("button",{type:"button",onClick:()=>j(!i),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition",children:i?e.jsx(w,{className:"h-5 w-5"}):e.jsx(y,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(h,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:o?"text":"password",required:!0,value:s.confirmPassword,onChange:u,className:"block w-full pl-12 pr-12 py-3.5 border border-gray-300 rounded-xl text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition duration-200 text-base",placeholder:"Confirm new password"}),e.jsx("button",{type:"button",onClick:()=>N(!o),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-600 transition",children:o?e.jsx(w,{className:"h-5 w-5"}):e.jsx(y,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"Password must contain:"}),e.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[e.jsx("li",{children:"• At least 8 characters"}),e.jsx("li",{children:"• One uppercase and one lowercase letter"}),e.jsx("li",{children:"• At least one number"})]})]}),e.jsx("button",{type:"submit",disabled:c,className:"w-full flex justify-center items-center py-4 px-4 border border-transparent rounded-xl shadow-lg text-base font-semibold text-white bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition duration-200 transform hover:scale-[1.02]",children:c?e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"animate-spin -ml-1 mr-3 h-5 w-5"}),"Resetting..."]}):"Reset Password"})]})})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100 px-4",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Invalid or Expired Link"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"This password reset link is invalid or has expired."}),e.jsx(T,{to:"/forgot-password",className:"inline-flex justify-center items-center w-full py-3 px-4 border border-transparent rounded-xl shadow-sm text-base font-medium text-white bg-primary-600 hover:bg-primary-700 transition",children:"Request New Link"})]})})})};export{Z as default};
